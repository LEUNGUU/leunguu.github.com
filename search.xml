<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title><![CDATA[Codisç›‘æ§å·¥å…·]]></title>
    <url>%2F2018%2F01%2F08%2Fcodis-watch%2F</url>
    <content type="text"><![CDATA[èƒŒæ™¯ç”±äºä¹‹å‰æˆåŠŸåœ°åšäº†ä¸€æ¬¡çº¿ä¸ŠCodisé›†ç¾¤ä¸åœæœºè¿ç§»ï¼Œå¹¶ä¸”ä¹‹åç¨³å®šçš„è¿è¡Œäº†ä¸€æ®µæ—¶é—´ã€‚éƒ¨é—¨å†…çš„è¿ç»´å¼Ÿå…„ä»¬çœ‹åˆ°äº†Codisçš„å¥½å¤„ï¼Œä¹Ÿçº·çº·åœ¨å„è‡ªè´Ÿè´£çš„ä¸šåŠ¡ä¸­æ¨å¹¿ä½¿ç”¨ã€‚ä¸ªäººæ„Ÿè§‰Codisé›†ç¾¤ç¡®å®è¦æ¯”ç›´æ¥çš„redisä¸»ä»æˆ–è€…sentinelè¦çµæ´»å¾ˆå¤šï¼Œå…¶ä¸­çš„å¥½å¤„å¤§å®¶å¯ä»¥å»githubä¸Šé¢æœç´¢codisï¼Œæœ€æ–°çš„ç‰ˆæœ¬æ˜¯codis3.0ã€‚ç”±äºä½¿ç”¨å¹¿æ³›ï¼Œå…¶ä¸­ä¹Ÿå‡ºç°äº†å¤§å¤§å°å°çš„é—®é¢˜ã€‚ é—®é¢˜æ¥ä¸´äº†å…¶å®è¿™é‡Œåªè®¨è®ºæœ€å¤§çš„ä¸€ä¸ªé—®é¢˜ï¼Œå°±æ˜¯ç›‘æ§ã€‚å…¶å®æˆ‘ä»¬å·²ç»æœ‰ä½¿ç”¨nagioså¯¹redis-serveræˆ–è€…proxyçš„ç«¯å£è¿›è¡Œç›‘æ§ï¼Œå‘Šè­¦é€Ÿåº¦ä¹Ÿæ¯”è¾ƒå¿«ã€‚ä½†æ˜¯ï¼Œå°±åƒæˆ‘åœ¨å›å¿†å½•é‡Œé¢è¯´åˆ°çš„ï¼Œèƒ½ä¸èƒ½è‡ªæˆ‘ä¿®å¤å‘¢ï¼Ÿç”±äºç¼“å­˜çš„ç‰¹æ€§ï¼Œæ•…éšœå‡ ç§’é’Ÿå°±æœ‰å¯èƒ½ä¸¢å¤±å¤§é‡çš„æ•°æ®ã€‚æ‰€ä»¥æˆ‘å¼€å§‹æ€è€ƒç›‘æ§å¹¶ä¸”æ²»æ„ˆã€‚å®˜æ–¹å¼€æºé‡Œé¢æœ‰ä¸€ä¸ªcodis-haçš„å·¥å…·ï¼Œæ˜¯ä¸€ä¸ªåå°è¿›ç¨‹ã€‚å®ƒå¯¹é›†ç¾¤å†…æ‰€æœ‰çš„server groupè¿›è¡Œç›‘æ§ï¼Œä¸€æ—¦å‘ç°groupå†…çš„masterå‡ºé—®é¢˜äº†ï¼Œé©¬ä¸Šè¿›è¡Œgroupå†…ä¸»ä»åˆ‡æ¢ã€‚è¿™ä¸ªå·¥å…·ç¡®å®å¯ä»¥å®ç°æ²»æ„ˆï¼Œä½†æ˜¯åé¢è¿˜éœ€è¦ä¸€äº›å–„åçš„å·¥ä½œã€‚æ¯”æ–¹è¯´æŒ‚æ‰çš„masterè¦å¯åŠ¨å¹¶ä¸”æ‰‹åŠ¨é‡æ–°åŠ åˆ°groupé‡Œé¢ç­‰ç­‰ã€‚ä½†æ˜¯è¿™ä¸ªcodis-haåªæ˜¯â€œé»˜é»˜åœ°â€œæ²»æ„ˆé›†ç¾¤ï¼Œå¹¶æ²¡æœ‰å‘Šè¯‰æˆ‘å®ƒå¹²äº†ä»€ä¹ˆã€‚åŒæ—¶ï¼Œå› ä¸ºcodis-serverç»å¸¸å˜åŠ¨ï¼Œéœ€è¦ç»å¸¸æ”¹åŠ¨nagiosç›‘æ§ä¹Ÿç€å®ä¸æ–¹ä¾¿ã€‚è¿™å°±ä¿ƒä½¿æˆ‘æ€è€ƒæ”¹è¿›çš„åŠæ³•ã€‚ æ€è·¯æœ‰äº†é€šè¿‡æ€è€ƒï¼Œæˆ‘æƒ³è‡ªå·±å®ç°ä¸€ä¸ªcodis-haã€‚æ—¢å¯ä»¥æ²»æ„ˆé›†ç¾¤ï¼Œåˆå¯ä»¥å‘é€å‘Šè­¦æ¶ˆæ¯ã€‚å®˜æ–¹çš„codis-haæ˜¯ä½¿ç”¨goè¯­è¨€ç¼–å†™çš„ï¼Œä½†æˆ‘ç†Ÿæ‚‰çš„æ˜¯pythonã€‚äºæ˜¯åœ¨ç†è§£äº†å®˜æ–¹çš„å®ç°é€»è¾‘ä¹‹åï¼Œæˆ‘è‡ªå·±å†™äº†ä¸€ä¸ªpythonç‰ˆçš„codis-haï¼Œå¹¶ä¸”æ˜¯å¸¦æœ‰å‘Šè­¦åŠŸèƒ½çš„ã€‚åˆ†äº«åœ¨githubï¼Œæ¬¢è¿å¤§å®¶ä½¿ç”¨å¹¶æ”¹è¿›ã€‚è¿™ä¸ªä»£ç åšäº†ç‚¹ä¿®æ”¹ï¼Œé»˜è®¤æ˜¯å‘é€é‚®ä»¶å‘Šè­¦ï¼Œå¦‚æœéœ€è¦ï¼Œä¹Ÿå¯ä»¥åŠ ä¸ŠçŸ­ä¿¡æˆ–è€…å¾®ä¿¡å‘Šè­¦ã€‚ Github: pyCodis-ha]]></content>
      <categories>
        <category>ç¼“å­˜</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[Codisä¸åœæœºè¿ç§»]]></title>
    <url>%2F2018%2F01%2F06%2Fcodis-migrate%2F</url>
    <content type="text"><![CDATA[èƒŒæ™¯å½“æ—¶ä»åˆ«çš„éƒ¨é—¨æ¥æ‰‹äº†ä¸€å¥—æœåŠ¡ï¼Œé‡Œé¢ä½¿ç”¨äº†ä¸€å¥—è±Œè±†èšå¼€æºçš„Codis2.0ç‰ˆæœ¬çš„ç¼“å­˜é›†ç¾¤ã€‚ä½†æ˜¯ç”±äºå†å²åŸå› ï¼Œç°è¡Œçš„æ¶æ„ä¸æ˜¯å¾ˆåˆç†ã€‚é›†ç¾¤çš„dashboardï¼Œproxyä»¥åŠcodis-serveréƒ½é›†ä¸­å¤ç”¨åœ¨ä¸»è¦å‡ å°ä¸»æœºä¸Šã€‚å…¶ä¸­å…±æœ‰å››å°ä¸»æœºï¼Œæ¯å°ä¸»æœºè§’è‰²éƒ½æœ‰proxyï¼ŒZookeeperServerä»¥åŠcodis-serverã€‚å¹¶ä¸”æ¯å°æœºå™¨å­˜åœ¨6ä¸ªä¸»å®ä¾‹ï¼Œå¯¹äºç”Ÿäº§ç³»ç»Ÿï¼Œè¿™æ ·çš„ç»“æ„å­˜åœ¨æå¤§çš„å®‰å…¨éšæ‚£ã€‚äºæ˜¯è€ƒè™‘åšä¸€æ¬¡è¿ç§»ï¼Œå°†è§’è‰²åˆ†æ•£å¼€æ¥ï¼Œé™ä½é£é™©ã€‚ç”±äºæ˜¯ç”Ÿäº§ç³»ç»Ÿï¼Œæœ¬æ¬¡è¿ç§»å¿…é¡»æ˜¯ä»¥ä¸å½±å“çº¿ä¸ŠæœåŠ¡ä¸ºå‰æï¼Œä¸‹é¢æ¥å™è¿°åŸºæœ¬è¿‡ç¨‹ã€‚ è¿ç§»è¿‡ç¨‹è¿™é‡Œå…¶å®åˆ†æˆäº†ä¸¤éƒ¨åˆ†ï¼Œä¸€éƒ¨åˆ†æ˜¯ç»„ä»¶è¿ç§»ï¼Œå¦ä¸€éƒ¨åˆ†æ˜¯æ•°æ®è¿ç§»ã€‚ ç»„ä»¶è¿ç§»æ–°çš„è§„åˆ’æ˜¯3å°codis-proxyå’Œzookeeperï¼ˆå¤ç”¨åœ¨ä¸€èµ·ï¼‰ï¼Œdashboardä¸€å°ï¼Œcodis-serveræ•°å°ã€‚ç»„ä»¶è¿ç§»çš„ç›®æ ‡æ˜¯å°†æ—§æœºå™¨ä¸Šçš„ç»„ä»¶æŒ‰è§„åˆ’è¿ç§»åˆ°æ–°æœºå™¨ä¸Šã€‚ä¸‹é¢æè¿°è¯¦ç»†è¿‡ç¨‹ã€‚ Step-1å› ä¸ºåŸæ¥æœ‰4å°zkï¼Œé‚£ä¹ˆæˆ‘ä»¬å…ˆæ–°å¢3å°ï¼Œä»¤é›†ç¾¤ä¿æŒå¥‡æ•°ã€‚åšæ³•æ˜¯åœ¨åŸæ¥4å°zkçš„serveråˆ—è¡¨é‡Œé¢æ·»åŠ è¿›æ–°çš„3å°ï¼ŒåŒæ—¶æ–°çš„3å°zkçš„serveråˆ—è¡¨ä¹Ÿæ˜¯é¢„å…ˆå†™å¥½äº†7ä¸ªserverã€‚è¿™æ—¶å€™é€‰æ‹©åŸæœ‰çš„4å°zkæ¯æ¬¡ä¸¤å°è¿›è¡Œé‡å¯ï¼ˆæµ‹è¯•è¿‡ç¨‹ä¸­å‘ç°ä¸€æ¬¡é‡å¯ä¸¤å°é›†ç¾¤ä¼šæ¯”è¾ƒç¨³å®šï¼‰ã€‚è¿™é‡Œæè¿°ä¸€ä¸‹é‡Œé¢çš„åŸç†ã€‚å…¶å®zkåªè¦é›†ç¾¤é‡Œé¢çš„èŠ‚ç‚¹è¶…è¿‡åŠæ•°æ˜¯å­˜æ´»çš„ï¼Œé›†ç¾¤å°±æ˜¯ç¨³å®šçš„ã€‚é‚£ä¹ˆè¢«é‡å¯åçš„ä¸¤å°æœºå™¨è®¤ä¸ºç°åœ¨å­˜æ´»çš„æ˜¯4å°ï¼ˆæ–°çš„3å°æ²¡æœ‰å¯åŠ¨ï¼‰ï¼Œè¶…è¿‡åŠæ•°ï¼Œé›†ç¾¤ç¨³å®šã€‚ é‚£ä¹ˆè¿™æ—¶å€™æˆ‘ä»¬å†å¯åŠ¨åé¢çš„3å°ï¼Œè¿™æ—¶å€™zké›†ç¾¤å°±å˜æˆäº†7å°ã€‚ Step-2è¿™æ—¶å€™æˆ‘ä»¬å°†æ–°çš„3å°codis-proxyä¸Šçº¿(proxyé‡Œé¢çš„zk serveråˆ—è¡¨æ˜¯æ–°çš„3å°zk)ï¼Œä¿®æ”¹LVSå…¥å£è°ƒåº¦ç­–ç•¥ï¼Œå°†æµé‡å¼•åˆ°æ–°çš„proxyä¸Šã€‚ç„¶åå°†æ—§çš„4å°zkä»»é€‰3å°åœæ­¢ä¸Šé¢çš„zkè¿›ç¨‹(è¿™é‡Œä¸ºäº†è®©é›†ç¾¤æ²¡æœ‰åœé¡¿ï¼Œæœ€å¥½é€‰æ‹©éleaderèŠ‚ç‚¹)ã€‚ç„¶åç±»ä¼¼Step-1çš„æ“ä½œï¼Œä¿®æ”¹ä½™ä¸‹4å°zkçš„serveråˆ—è¡¨ï¼Œä»ä¸­å‰”é™¤å·²åœæ­¢çš„3å°ï¼Œå¹¶æ¯æ¬¡é€‰ä¸¤å°è¿›è¡Œé‡å¯ï¼Œæ­¤æ—¶zké›†ç¾¤å˜æˆ4ä¸ªèŠ‚ç‚¹ã€‚ Step-3è¿…é€Ÿå°†æ—§çš„dashboardåœæ‰ï¼Œå¯åŠ¨æ–°çš„dashboardã€‚ç„¶åå°†æ—§çš„4å°codis-proxyä¸­çš„zk serveråˆ—è¡¨å˜æˆæ–°çš„3å°zkï¼Œç„¶åé€ä¸ªé‡å¯ã€‚è¿™æ—¶å€™å°±å®Œæˆäº†90%çš„å·¥ä½œäº†ã€‚ Step-4åœæ‰åŸæ¥å‰©ä¸‹çš„1å°zkï¼Œå¹¶æ›´æ–°zké›†ç¾¤çš„serveråˆ—è¡¨ï¼Œæ¯æ¬¡ä»»é€‰ä¸¤å°è¿›è¡Œé‡å¯ã€‚æ­¤æ—¶zké›†ç¾¤æˆåŠŸå˜æˆäº†3ä¸ªèŠ‚ç‚¹ï¼Œproxyæ­¤æ—¶æœ‰7ä¸ªï¼ˆåŸæœ‰çš„4ä¸ªå’Œæ–°ä¸Šçš„3ä¸ªï¼‰å¹¶ä¸”å…¶ä¸­çš„zkåˆ—è¡¨éƒ½æ˜¯æ–°çš„3ä¸ªzkèŠ‚ç‚¹ã€‚ åˆ°è¿™é‡Œï¼Œæˆ‘ä»¬å°±å®Œæˆäº†è¿ç§»çš„ç¬¬ä¸€æ­¥ï¼šç»„ä»¶è¿ç§»ã€‚å…¶å®è¿™é‡Œé¢æ­¥éª¤æœ‰ç‚¹å¤æ‚ï¼Œä½†æ˜¯éƒ½æ˜¯å›´ç»•ç€zké›†ç¾¤ä¸èƒ½è¶…è¿‡åŠæ•°å®•æœºä»¥åŠå¹³æ»‘åœ°å°†zké‡Œçš„æ•°æ®åŒæ­¥åˆ°æ–°zkèŠ‚ç‚¹ä¸Šã€‚æ¥ä¸‹æ¥æˆ‘ä»¬ç»§ç»­ä¸‹ä¸€æ­¥ã€‚ æ•°æ®è¿ç§»å½“å‰æ˜¯æœ‰å››å°codis-serverï¼Œæ¯å°æœ‰6ä¸ª6Gçš„å®ä¾‹ã€‚æ¯ä¸ªå®ä¾‹éƒ½æ˜¯ä¸€ä¸ªç»„çš„ä¸»å®ä¾‹ã€‚ç°åœ¨çš„ç›®çš„æ˜¯å°†æ•°æ®è¿ç§»åˆ°14å°codis-serverä¸­ï¼Œæ¯å°codis-serveråªæœ‰ä¸€ä¸ª6Gå®ä¾‹ï¼Œå…¶ä¸­æ•°æ®çš„æ¸…é™¤è§„åˆ™è®¾ç½®çš„æ˜¯Allkeys-LRUã€‚ç”±äºä¹‹å‰æ‰§è¡Œäº†auto-rebalanceæ“ä½œï¼Œå…¨éƒ¨éƒ½æ‰“æ•£äº†ï¼Œæ•…è¿ç§»è¿‡ç¨‹ä¸»è¦æ˜¯é¦–å…ˆæ‰«æé›†ç¾¤çš„slotï¼Œå–å‡ºéœ€è¦ç»„çš„slot_idï¼Œç„¶åè¿›è¡Œè¿ç§»ã€‚ç»†å¿ƒçš„æ‚¨å¯èƒ½ä¼šå‘ç°è¿™ä¸ªæ•°æ®è¿ç§»å‰åçš„æ•°æ®é‡ä¸ä¸€è‡´ã€‚æ˜¯çš„ï¼Œæˆ‘ä»¬ä¸åªæ˜¯åšè¿ç§»ï¼Œè¿˜æ¸…ç†äº†ä¸€äº›åƒåœ¾æ•°æ®ã€‚ æ€»ç»“åˆ°æ­¤æ•´ä¸ªä¸åœæœºè¿ç§»çš„è¿‡ç¨‹ç»“æŸã€‚åšå®Œè¿™ä¸ªè¿‡ç¨‹ç¡®å®æ”¶ç›Šä¸å°‘ï¼Œå…¶ä¸­æœ€é‡è¦çš„æˆ‘è®¤ä¸ºæ˜¯å…«ä¸ªå­—ï¼šè®¤çœŸå‡†å¤‡ï¼Œèƒ†å¤§å¿ƒç»†ã€‚ç”±äºè¿™æ¬¡æ“ä½œçš„ç¼“å­˜æ˜¯ç”Ÿäº§ç¯å¢ƒçš„ï¼Œä¸€å‡ºç°å·®é”™ä¼šç›´æ¥å½±å“çº¿ä¸ŠæœåŠ¡ã€‚æ‰€ä»¥æ“ä½œä¹‹å‰è¿›è¡Œäº†å„ç§æµ‹è¯•ï¼Œåšå¥½äº†é£é™©è¯„ä¼°ã€‚å®æ–½çš„æ—¶å€™ä¸¥æ ¼æŒ‰ç…§æ–½å·¥æ–‡æ¡£æ“ä½œï¼Œæ­¥æ­¥ä¸ºè¥ï¼Œå¦‚å±¥è–„å†°ã€‚ å‚è€ƒhttps://github.com/CodisLabs/codishttps://cwiki.apache.org/confluence/display/ZOOKEEPER/Index]]></content>
      <categories>
        <category>ç¼“å­˜</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[å›å¿†å½•ï¼ˆwebæœåŠ¡ç¯‡ï¼‰]]></title>
    <url>%2F2018%2F01%2F05%2Fthinking-about-web%2F</url>
    <content type="text"><![CDATA[åˆè¯†æœåŠ¡è®°èµ·å½“æ—¶åœ¨aå…¬å¸çš„æ—¶å€™ï¼Œé™¤äº†è´Ÿè´£å¤§æ•°æ®é›†ç¾¤çš„ç»´æŠ¤ä¹‹å¤–ï¼Œè¿˜éœ€è¦ç»´æŠ¤ä¸€ä¸¤ä¸ªwebæœåŠ¡ã€‚æˆ‘ä»¬å›¢é˜Ÿåˆ†å·¥æ¯”è¾ƒåˆç†ï¼Œæ¯ä¸€ä¸ªä¸šåŠ¡éƒ½æœ‰ABè§’ï¼Œè™½ç„¶è§’è‰²äº¤å‰é‡å ï¼Œä½†æ˜¯æ¡ç†æ¸…æ¥šï¼Œåˆ†å·¥æ˜ç¡®ã€‚å½“æ—¶æˆ‘å°±æ˜¯å…¶ä¸­ä¸¤ä¸ªä¸šåŠ¡çš„è¿ç»´Bè§’è‰²( å…¶å®æ˜¯æ›¿è¡¥ğŸ˜„ )ã€‚è€å®è¯´ï¼Œåˆ°è¿™æ—¶å€™ï¼Œæˆ‘æ‰æ˜¯åˆšå¼€å§‹æ¥è§¦webæœåŠ¡ã€‚ å¼€å§‹ç§¯ç´¯æˆ‘æ˜¯ä»ä»£ç æ›´æ–°å¼€å§‹ç†Ÿæ‚‰æ‰€ç®¡ç†çš„æ•´å¥—ä¸šåŠ¡çš„ã€‚2015å¹´çš„æˆ‘ä»¬æ˜¯ä¸šç•Œæ‰€è¯´çš„è„šæœ¬æ—¶ä»£ï¼Œä»£ç æ›´æ–°å…¨æ˜¯æ‰§è¡Œè„šæœ¬ã€‚ä»£ç æ”¾åœ¨ç°åº¦æˆ–è€…æµ‹è¯•ç¯å¢ƒï¼Œä»ç”Ÿäº§ç¯å¢ƒä¸‹çº¿æœºå™¨ï¼ŒåŒæ­¥ä»£ç åˆ°å·²ä¸‹çº¿æœºå™¨ï¼Œé‡å¯ï¼Œæ£€æŸ¥æ—¥å¿—ï¼Œæ­£å¸¸åˆ™ä¸Šçº¿å¹¶ç»§ç»­æ›´æ–°ä½™ä¸‹æœºå™¨ï¼›æŠ¥é”™åˆ™å’Œç ”å‘ä¸€èµ·æŸ¥çœ‹é—®é¢˜ï¼Œèƒ½è§£å†³åˆ™ç»§ç»­ï¼Œä¸èƒ½åˆ™å›æ»šå¹¶è®°å½•å‡çº§å¤±è´¥ã€‚å½“æ—¶æœ‰å¾ˆé•¿ä¸€æ®µæ—¶é—´éƒ½æ˜¯ä¸“é—¨åšè¿™ä¸€é¡¹å·¥ä½œï¼Œè€Œä¸”éƒ½æ˜¯åŠå¤œä¸‰æ›´ç­‰å¤§å®¶éƒ½ç¡äº†çš„æ—¶å€™æ‰å¼€å§‹ï¼ˆæ›´æ–°åªèƒ½é€‰æ™šä¸Šæµé‡ä¸å¤§çš„æ—¶å€™ï¼‰ã€‚è¿™ä¸ªè¿‡ç¨‹è™½ç„¶è‰°è‹¦ï¼Œä½†æ˜¯ä¹Ÿç§¯ç´¯äº†ä¸å°‘ç»éªŒã€‚æ¯”å¦‚ä¸šåŠ¡é€»è¾‘ï¼Œç³»ç»Ÿæ¶æ„ï¼ŒæŸ¥æ‰¾é—®é¢˜çš„æ–¹æ³•è®ºç­‰ç­‰ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œå½“æ—¶æˆ‘ä»¬è¿˜ç»å¸¸ä¼šé‡åˆ°æ•…éšœã€‚å› ä¸ºäº‘è®¡ç®—ä¾›åº”å•†çš„æœåŠ¡ä¸æ˜¯å¾ˆç¨³å®šï¼Œæ—¶ä¸æ—¶éƒ½ä¼šå‡ºç°ç½‘ç»œæ•…éšœï¼Œæœºå™¨æ•…éšœç­‰ï¼ˆç”šè‡³æˆ‘ä»¬ç›´æ¥ä½¿ç”¨çš„ç‰©ç†æœºä¹Ÿæ—¶ä¸æ—¶å‡ºç°ç£ç›˜åªè¯»ï¼‰ã€‚æ¯æ¬¡æ•…éšœæˆ‘éƒ½èƒ½å­¦åˆ°ä¸å°‘ä¸œè¥¿ï¼Œæ›´åŠ æ˜ç™½â€å…»å…µåƒæ—¥ ç”¨å…µä¸€æ—¶â€çš„é“ç†ã€‚åœ¨å¹³æ—¶å°±åº”è¯¥å°½é‡æŠŠäº‹æƒ…è€ƒè™‘å½»åº•ï¼Œæ—¶åˆ»å‡†å¤‡ç€ï¼Œæ‰èƒ½æ›´å¥½åº”å¯¹çªå‘æƒ…å†µã€‚ å¼€å§‹æ€è€ƒä»£ç æ›´æ–°ä»¤æˆ‘ç†Ÿæ‚‰æ•´ä¸ªæœåŠ¡ç®¡ç†æµç¨‹ã€‚è¿™é‡Œé¢çš„å­¦é—®å…¶å®æœ‰å¾ˆå¤šã€‚ æœåŠ¡çš„æ­å»ºï¼ˆåŒ…æ‹¬æµ‹è¯•ï¼Œç°åº¦å’Œç”Ÿäº§ç¯å¢ƒçš„åè°ƒç­‰ç»†èŠ‚ï¼‰ æœåŠ¡å™¨æƒé™ä»¥åŠç›®å½•çš„ç®¡ç†ï¼ˆç ”å‘å¸å·ï¼ŒæœåŠ¡å¸å·ï¼Œç›®å½•è·¯å¾„è§„èŒƒï¼‰ ä¸­é—´ä»¶çš„é…ç½®ç®¡ç† ç³»ç»Ÿå‚æ•°ä¼˜åŒ–ä»¥åŠä¸­é—´ä»¶è°ƒä¼˜ï¼ˆä¸»è¦æ˜¯JVMè°ƒä¼˜ï¼Œå†…æ ¸å‚æ•°ä¼˜åŒ–ï¼‰ æœåŠ¡çš„ç›‘æ§ï¼ˆåŒ…æ‹¬ä¸»æœºç›‘æ§ä»¥åŠæœåŠ¡ç«¯å£ç›‘æ§ï¼Œå‘Šè­¦é€šçŸ¥ç­‰ï¼‰ æœåŠ¡æ‰€ä½¿ç”¨çš„ç¼“å­˜ç®¡ç† åŒæ—¶ï¼Œä»æ•…éšœä¸­æˆ‘ä¹Ÿé¢†ä¼šåˆ°äº†ä¸å°‘é—¨é“ã€‚ éƒ¨ç½²ç¯å¢ƒï¼ˆå°¤å…¶ç”Ÿäº§ï¼‰ä¸€å®šè¦è€ƒè™‘é«˜å¯ç”¨ ç›‘æ§ç‚¹å¿…é¡»è¦†ç›–å…¨é¢ï¼ˆä»ä¸»æœºåˆ°æœåŠ¡ï¼‰ è€ƒè™‘å¤‡ä»½æœåŠ¡ï¼ˆè§†æƒ…å†µè€Œå®šï¼‰ å°½é‡é¿å…å®æ–½å½±å“æœåŠ¡ç¨³å®šæ€§çš„éœ€æ±‚ï¼ˆä¿—è¯è¯´çš„ä¸è¦ç»™è‡ªå·±åŸ‹å‘ï¼‰ ï¼ˆè¿™é‡Œçš„æ€»ç»“åªæ˜¯æœ¬äººçš„æ„šè§ï¼Œå¸Œæœ›é˜…è¯»çš„æ‚¨èƒ½æ‰¹è¯„æŒ‡æ­£ğŸ™ ï¼‰ å¼€å§‹æ¢ç´¢å‰æ–‡è¯´åˆ°çš„â€œæ·±å¤œæ›´æ–°â€ä»¥åŠæ•…éšœå¤„ç†ç¡®å®æŒºè‰°è‹¦çš„ã€‚ä¸ºæ­¤ï¼Œæˆ‘å¼€å§‹æ€è€ƒæ€ä¹ˆâ€œå·æ‡’â€ã€‚ğŸ˜œé¦–å…ˆæ˜¯å¯¹ä»˜æ›´æ–°ï¼Œæˆ‘åœ¨æƒ³èƒ½ä¸èƒ½è‡ªåŠ¨åŒ–ï¼Œè®©ç³»ç»Ÿè‡ªå·±æ‰§è¡Œæ›´æ–°å‘½ä»¤ç„¶åæˆ‘ç¡å¤§è§‰å‘¢ã€‚ğŸ˜ç„¶åæ˜¯å¯¹ä»˜æ•…éšœï¼Œå¤§å®¶éƒ½è¯´é˜²èŒƒäºæœªç„¶ã€‚é‚£èƒ½ä¸èƒ½å°†ç›‘æ§å‡çº§ä¸€ä¸‹ï¼Œç›‘æ§ä¸æ­¢äºç›‘æ§ï¼Œè¿˜å…·å¤‡ä¿®å¤åŠŸèƒ½ã€‚äºæ˜¯ï¼Œæˆ‘å¼€å§‹æ¢ç´¢å®ç°çš„æ‰‹æ®µã€‚æ¥ä¸‹æ¥å°±è®°å½•å‡ ä¸ªæ —å­å§ã€‚ğŸ˜„]]></content>
      <categories>
        <category>ä¸ªäººæ„Ÿæ‚Ÿ</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[Hbaseçš„ä¸€ç‚¹å°æ€»ç»“]]></title>
    <url>%2F2018%2F01%2F03%2Fmanage-hbase%2F</url>
    <content type="text"><![CDATA[å‰è¨€è®°å½•ä¸€ä¸‹å½“æ—¶åœ¨ç®¡ç†CDHç‰ˆæœ¬çš„Hbaseæ—¶å€™çš„ä¸€äº›å°ç»éªŒã€‚ é…ç½®HBase CanaryCanaryæ˜¯ä¸€ä¸ªé˜¶æ®µæ€§æ£€æŸ¥RegionServeræ˜¯å¦å­˜æ´»çš„æœåŠ¡ã€‚é»˜è®¤æ˜¯å…³é—­çš„ï¼Œä½ å¯ä»¥å¯ç”¨è¿™ä¸ªæœåŠ¡ï¼Œå¹¶è®¾ç½®ä¸€äº›ç›¸å…³å±æ€§ã€‚ å¯ç”¨Canary/usr/bin/hbase org.apache.hadoop.hbase.tool.Canary --daemon å…·ä½“å¯é…ç½®é€‰é¡¹å¯ä»¥æŸ¥çœ‹å®˜ç½‘æ–‡æ¡£ã€‚ æ£€æŸ¥ä»¥åŠä¿®å¤HBaseè¡¨ä½¿ç”¨hbckå‘½ä»¤æœ‰ä¸¤ç§æ¨¡å¼ï¼š åªæ£€æŸ¥ä¸ä¿®å¤ æ£€æŸ¥å¹¶ä¿®å¤ è¿è¡Œhbckå‘½ä»¤(ä¸å¸¦å‚æ•°ï¼šæ£€æŸ¥è¡¨å¹¶æ‰“å°okï¼Œè‹¥æœ‰é—®é¢˜ï¼Œåªä¼šæ˜¾ç¤ºé—®é¢˜çš„æ•°ç›®ã€‚)/usr/lib/hbase/bin/hbase hbck æ‰“å°è¯¦ç»†çš„æ£€æŸ¥æ—¥å¿—ï¼š/usr/lib/hbase/bin/hbase hbck -details æ£€æŸ¥æŒ‡å®šçš„è¡¨ï¼š /usr/lib/hbase/bin/hbase hbck &lt;table1&gt; &lt;table2&gt; Hedged Read å¦‚æœæ­£åœ¨è¯»æŸä¸ªblockæ¯”è¾ƒæ…¢ï¼Œhdfså®¢æˆ·ç«¯ä¼šå¯åŠ¨å¦ä¸€ä¸ªå¹¶è¡Œçš„çº¿ç¨‹å»è¯»æ­¤blockçš„å‰¯æœ¬ã€‚æ­¤åŠŸèƒ½åªèƒ½åœ¨HFileså­˜å‚¨åœ¨hdfsä¸Šçš„æ—¶å€™è¢«å¯ç”¨ï¼Œé»˜è®¤æ˜¯å…³é—­çš„ã€‚å¯ç”¨Hedged Readåœ¨HBaseé›†ç¾¤çš„æ¯ä¸€å°æœºå™¨ä¸Šé¢çš„hbase-site.xmlæ–‡ä»¶è®¾ç½®å¦‚ä¸‹å±æ€§ã€‚ &lt;property&gt; &lt;name&gt;dfs.client.hedged.read.threadpool.size&lt;/name&gt; &lt;value&gt;20&lt;/value&gt; &lt;!-- 20 threads --&gt; &lt;/property&gt; &lt;property&gt; &lt;name&gt;dfs.client.hedged.read.threshold.millis&lt;/name&gt; &lt;value&gt;10&lt;/value&gt; &lt;!-- 10 milliseconds --&gt; &lt;/property&gt; é…ç½®RSçš„æ•°æ®å‡è¡¡å½“æ—¶åœ¨HBaseçš„ç®¡ç†ç•Œé¢ä¸Šå‘ç°regionåœ¨å„ä¸ªRSä¸Šé¢å¹¶ä¸å‡è¡¡ï¼Œé€šè¿‡æŸ¥é˜…æ–‡æ¡£å¾—å‡ºéœ€è¦é…ç½®ä»¥ä¸‹ä¸¤ä¸ªå±æ€§ã€‚ &lt;property&gt; &lt;name&gt;hbase.balancer.period&lt;/name&gt; &lt;value&gt;3000000&lt;/value&gt; &lt;/property&gt; &lt;property&gt; &lt;name&gt;hbase.master.loadbalancer.class&lt;/name&gt; &lt;value&gt;org.apache.hadoop.hbase.master.balancer.StochasticLoadBalancer&lt;/value&gt; &lt;/property&gt; åŒæ—¶ï¼Œå¦‚æœå¯¹RSä½¿ç”¨graceful_stopï¼Œè¿™ä¸ªè„šæœ¬ä¼šå»æ£€æŸ¥balanceræ˜¯å¦å¼€å¯ï¼Œå¦‚æœæ˜¯ï¼Œä¼šè‡ªåŠ¨æŠŠbalancerå…³é—­ï¼Œæ•…èŠ‚ç‚¹ä¸‹çº¿ä¹‹åéœ€è¦æ‰‹åŠ¨å¼€å¯balancerã€‚å‘½ä»¤å¦‚ä¸‹ï¼šbalance_switch true åŒæ—¶ï¼Œä¹Ÿå¯ä»¥æ‰‹åŠ¨å…³é—­balancerï¼Œå‘½ä»¤å¦‚ä¸‹ï¼›balance_switch false hbaseèŠ‚ç‚¹å¹³æ»‘ä¸‹çº¿æ³¨ï¼šè¿™æ˜¯ç®¡ç†CDHç‰ˆæœ¬Hbaseçš„åŠæ³•ã€‚ åˆ‡æ¢balance: balance_switch false unload: /usr/bin/hbase --config /etc/hbase/conf org.jruby.Main /usr/lib/hbase/bin/region_mover.rb unload &lt;hostname&gt; åœæ­¢RS: service hbase-regionserver stop åˆ‡æ¢balance: balance_switch true å‚è€ƒhttps://www.cloudera.com/documentation/enterprise/latest/topics/admin_hbase_config.html]]></content>
      <categories>
        <category>å¤§æ•°æ®</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[Sparkçš„ä¸€ç‚¹å°æ€»ç»“]]></title>
    <url>%2F2018%2F01%2F03%2Fmanage-spark%2F</url>
    <content type="text"><![CDATA[å‰è¨€Sparkåº”ç”¨ç±»ä¼¼äºMRä½œä¸šã€‚åœ¨MRä¸­ï¼Œæœ€é«˜çº§çš„è®¡ç®—å•å…ƒæ˜¯ä½œä¸šã€‚ç³»ç»Ÿè¯»å–æ•°æ®ï¼Œmapï¼Œshuffleï¼Œreduceï¼Œç„¶åå†™å›å­˜å‚¨ã€‚åœ¨Sparkä¸­ï¼Œæœ€é«˜çº§çš„è®¡ç®—å•å…ƒæ˜¯åº”ç”¨ï¼Œåº”ç”¨å¯ä»¥è¿è¡Œä¸€ç³»åˆ—ä½œä¸šæˆ–è€…æ˜¯å¹¶è¡Œä½œä¸šã€‚ä¸€ä¸ªSparkçš„ä½œä¸šå¯ä»¥ç”±å¤šä¸ªé˜¶æ®µç»„æˆã€‚Sparkä¾èµ–driverè¿›ç¨‹ç®¡ç†å·¥ä½œæµå’Œå®‰æ’ä»»åŠ¡ã€‚ Sparkæœ¯è¯­ RDDï¼šSparkç¼–ç¨‹æ ¸å¿ƒï¼Œæ˜¯ä¸€ä¸ªå®¹é”™çš„å…ƒç´ é›†ç»„æˆã€‚å¯ä»¥å¹¶è¡Œåœ°è¢«å¤šæ¬¡å¤„ç†ã€‚ partitionï¼šRDDçš„å…ƒç´ å­é›†ã€‚partitionæ˜¯ä¸€ä¸ªå¹¶è¡Œçš„å•å…ƒï¼ŒSparkå¯ä»¥å¹¶è¡Œå¤„ç†å¤šä¸ªpartitionçš„å…ƒç´ ã€‚ driverï¼šä¸€ä¸ªappä¸€ä¸ªï¼Œè´Ÿè´£åˆå§‹åŒ–ä¹‹ç±»çš„å·¥ä½œã€‚ executorï¼šçœŸæ­£è·‘ç¨‹åºçš„è¿›ç¨‹ã€‚ä¸€ä¸ªä¸»æœºå¯èƒ½ä¼šæœ‰å¤šä¸ªexecutorã€‚ deploy modeï¼šclient modeçš„driverè¿è¡Œåœ¨clusterä¹‹å¤–ï¼Œcluster modeçš„driverè¿è¡Œåœ¨clusterå†…ï¼Œå¹¶log outä¹‹åç¨‹åºä¸ä¼šä¸­æ–­ã€‚ è¿è¡Œsparkç¨‹åºçš„æ–¹æ³•å¯ä»¥ä½¿ç”¨spark-submitè„šæœ¬æäº¤å·²ç»ç¼–è¯‘å¥½çš„sparkç¨‹åºã€‚æäº¤å‘½ä»¤ï¼šspark-submit --option value application jar | python file [application arguments] é€‰é¡¹ æè¿° application jar ç¨‹åºä»¥åŠç›¸å…³ä¾èµ–çš„jaråŒ… python file ç¨‹åºçš„pythonæ–‡ä»¶ application arguments ç¨‹åºéœ€è¦çš„å‚æ•° optional tableå¦‚ä¸‹ï¼š é€‰é¡¹ æè¿° â€“ â€“ class ç¨‹åºçš„ä¸»ç±»ï¼Œå¦‚org.apache.spark.examples.SparkPi â€“ â€“ conf sparkçš„é…ç½®å±æ€§ â€“ â€“ deploy-mode clusteræˆ–è€…clientï¼Œé»˜è®¤æ˜¯client â€“ â€“ driver-cores driverä½¿ç”¨çš„æ ¸å¿ƒæ•°ï¼Œåªåœ¨clusteræ¨¡å¼ç”Ÿæ•ˆï¼Œé»˜è®¤æ˜¯1 â€“ â€“ jars æ·»åŠ ä¾èµ–çš„jaråŒ…ï¼Œè¿™äº›jaråŒ…éœ€è¦åœ¨hdfsä¸Šï¼Œå¦åˆ™å®ƒä»¬å¿…é¡»åœ¨æ¯ä¸€ä¸ªexecutorä¸Š â€“ â€“ master è¿è¡Œç¨‹åºçš„åœ°æ–¹ masterå€¼å¦‚ä¸‹ï¼š master æè¿° local ç”¨ä¸€ä¸ªworkerçº¿ç¨‹ï¼ˆéå¹¶è¡Œï¼‰ local[k] ç”¨kä¸ªworkerçº¿ç¨‹ï¼ˆkçš„å€¼æ˜¯ä¸»æœºçš„æ ¸å¿ƒæ•°ï¼‰ local[*] ç”¨çš„workerçº¿ç¨‹å’Œç‰©ç†æ ¸å¿ƒæ•°ä¸€è‡´ spark://host:post åœ¨æŒ‡å®šçš„ä¸»æœºä¸Šè·‘masterè¿›ç¨‹ yarn åœ¨yarnä¸Šè¿è¡Œ æ§åˆ¶å‚æ•°è¯»å–çš„ä¼˜å…ˆé¡ºåºï¼š SparkConfä¼ å…¥çš„å‚æ•° spark-submitï¼Œspark-shellæˆ–è€…pysparkä¼ å…¥çš„å‚æ•° spark-defaults.confä¸­è®¾ç½®çš„å±æ€§ é›†ç¾¤æ¨¡å¼æ¦‚è§ˆä¸‹é¢æ˜¯ä½¿ç”¨spark-submitæäº¤ä¸€ä¸ªåº”ç”¨åˆ°é›†ç¾¤æ—¶æ‰€å‘ç”Ÿçš„äº‹æƒ…ï¼š spark-submitå¯åŠ¨driverè¿›ç¨‹å¹¶è°ƒç”¨äº†åº”ç”¨çš„mainæ–¹æ³•ã€‚ driverè¿›ç¨‹å‘é›†ç¾¤ç”³è¯·èµ„æºå»å¯åŠ¨executors é›†ç¾¤ä»£æ›¿driverå¯åŠ¨executor driverè¿è¡Œç”¨æˆ·ç¨‹åºï¼Œå°†ä¸€ç³»åˆ—æ“ä½œå‘é€åˆ°executors ä»»åŠ¡è¿è¡Œ å¦‚æœmainæ–¹æ³•é‡Œæœ‰exitsæˆ–è€…è°ƒç”¨SparkConf.stopï¼Œå°±ä¼šåœæ­¢executorså¹¶é‡Šæ”¾èµ„æº sparkè¿è¡Œæ¨¡å¼æ€»ç»“ æ¨¡å¼ YARN Client Mode YARN Cluster Mode Spark Standalone Driver runs in Client ApplicationMaster Client Requests resources ApplicationMaster ApplicationMaster Client Starts executor processes YARN NodeManager YARN NodeManager Spark Worker Persistent services YARN ResourceManager and NodeManagers YARN ResourceManager and NodeManagers Spark Master and Workers Supports Spark Shell Yes No Yes Cluster Mode:Client Mode: ä¸‹é¢è¿™äº›é€‰é¡¹æ˜¯ç”¨äºæäº¤Spark on YARN åº”ç”¨ç¨‹åºï¼š é€‰é¡¹ æè¿° â€“ â€“ executor-cores åˆ†é…ç»™æ¯ä¸ªexecutorçš„æ ¸å¿ƒæ•° â€“ â€“ executor-memory æ¯ä¸ªexecutorçš„å†…å­˜ â€“ â€“ num-executors åˆ†é…ç»™è¿™ä¸ªsparkåº”ç”¨çš„yarn containerçš„æ€»æ•° â€“ â€“ queue æäº¤åˆ°YARNé˜Ÿåˆ—å Cluster modeçš„ä¾‹å­ï¼šspark-submit --master yarn --deploy-mode cluster SPARK_HOME/lib/spark-examples.jar --class org.apache.spark.examples.SparkPi 10 Client Modeçš„ä¾‹å­ï¼šspark-submit --master yarn --deploy-mode client SPARK_HOME/lib/spark-examples.jar --class org.apache.spark.examples.SparkPi 10 SparkåŠ¨æ€åˆ†é…executorå¦‚æœç¨‹åºèµ„æºéœ€æ±‚ç»å¸¸å˜åŒ–ï¼Œsparkå¯ä»¥åŠ¨æ€å¢åŠ æˆ–è€…å‡å°‘ç¨‹åºexecutorçš„æ•°ç›®ã€‚è¦ä½¿åŠ¨æ€åˆ†é…ç”Ÿæ•ˆï¼Œå¯ä»¥è®¾ç½®spark.dynamicAllocation.enabledçš„å€¼ä¸ºtrueã€‚ç¨‹åºåˆ†é…æœ€å°‘çš„executoræ•°ç›®çš„å±æ€§æ˜¯spark.dynamicAllocation.minExecutorsï¼Œæœ€å¤šçš„æ˜¯spark.dynamicAllocation.maxExecutorsï¼Œåˆå§‹åŒ–å€¼æ˜¯é€šè¿‡è®¾ç½®spark.dynamicAllocation.initialExecutorså‚æ•°ã€‚è¿™æ—¶å€™ä¸è¦ä½¿ç”¨â€“num-executorså‚æ•°æˆ–è€…è®¾ç½®spark.executor.instancesè¿™ä¸ªå‚æ•°ï¼Œå®ƒä»¬ä¹‹é—´å¹¶ä¸ç›¸å®¹ã€‚ ä¼˜åŒ–YARNæ¨¡å¼é€šå¸¸ï¼Œæ¯æ¬¡æäº¤ä»»åŠ¡sparkéƒ½ä¼šå°†assembly jarä¸Šä¼ åˆ°hdfsï¼Œå¯ä»¥çœä¸‹è¿™æ­¥æé«˜æ•ˆç‡ï¼Œå¯ä»¥æ‰‹åŠ¨ä¸Šä¼ ä¹‹åè®¾ç½®SPARK_JARç¯å¢ƒå˜é‡ã€‚SPARK_JAR=hdfs://namenode:8020/user/spark/share/lib/spark-assembly.jar å‚è€ƒhttps://www.cloudera.com/documentation/enterprise/latest/topics/admin_spark.html]]></content>
      <categories>
        <category>å¤§æ•°æ®</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[ç®¡ç†YARNæœåŠ¡]]></title>
    <url>%2F2018%2F01%2F02%2Fmanage-yarn-2%2F</url>
    <content type="text"><![CDATA[å‰è¨€å…³äºYARNï¼Œåœ¨å®é™…å·¥ä½œä¸­æˆ‘ä»¬åšå¾—æœ€å¤šçš„æ˜¯é›†ç¾¤è°ƒä¼˜ï¼Œä¹Ÿå°±æ˜¯å°†è®¡ç®—èµ„æºåˆç†åˆ†é…ã€‚æœ¬æ–‡å°†ä¼šç»™å‡ºèµ„æºåˆ†é…çš„æ€è·¯ã€‚ é‡æ¸©æ¦‚å¿µ RMï¼šä¸€ä¸ªè´Ÿè´£ç®¡ç†è¿è¡Œä½œä¸šï¼Œåˆ†é…AMåˆ°å…·ä½“ä½œä¸šå¹¶ä¸”æ‰§è¡Œèµ„æºé™åˆ¶çš„ä¸»è¿›ç¨‹ã€‚ NMï¼šä¸€ä¸ªè´Ÿè´£å¯åŠ¨AMå’Œä»»åŠ¡å®¹å™¨çš„å·¥ä½œè¿›ç¨‹ã€‚ AMï¼šä¸€ä¸ªä¸ºæ‰§è¡Œä»»åŠ¡ç”³è¯·èµ„æºçš„ç®¡ç†è¿›ç¨‹ã€‚ vcoreï¼šè™šæ‹Ÿæ ¸å¿ƒï¼Œä¸€ä¸ªé€»è¾‘çš„å¤„ç†å™¨å•å…ƒã€‚ containerï¼šä»»åŠ¡çš„èµ„æºæ± ã€‚è¿™é‡ŒåŒ…æ‹¬vcoreså’Œmemoryã€‚ ç¡®å®šè®¡ç®—èµ„æºå’ŒæœåŠ¡éœ€è¦é¦–å…ˆéœ€è¦ç¡®å®šæ¯ä¸ªè®¡ç®—èŠ‚ç‚¹æ‹¥æœ‰å¤šå°‘vcoresï¼Œå¤šå°‘memoryå’Œå¤šå°‘ä¸ªç£ç›˜ï¼›å…¶æ¬¡ï¼Œä¼°è®¡è¿è¡ŒNMæˆ–è€…DNï¼ˆæˆ–è€…è¯¥èŠ‚ç‚¹ä¸Šéœ€è¦è¿è¡Œçš„æœåŠ¡ï¼‰éœ€è¦å¤šå°‘èµ„æºï¼Œè¿˜éœ€è¦å‡å»æ“ä½œç³»ç»Ÿæœ¬èº«çš„æœåŠ¡æ‰€éœ€çš„èµ„æºã€‚ ä¼°ç®—èµ„æºCDHæ¨èæœ‰ä»¥ä¸‹å‡ ç‚¹ï¼š é¢„ç•™10-20%çš„å†…å­˜ç»™ç³»ç»ŸåŠå…¶è¿›ç¨‹æœåŠ¡ã€‚ æœ€å°‘16GBçš„å†…å­˜ç•™ç»™impaladè¿›ç¨‹ã€‚ ä¸è¶…è¿‡12-16GBçš„å†…å­˜ç»™RegionServerè¿›ç¨‹ã€‚ å¦å¤–ï¼Œéœ€è¦é¢„ç•™èµ„æºç»™ä»»åŠ¡ç¼“å­˜ï¼Œä¾‹å¦‚HDFS Sort I/O bufferã€‚ å¯¹äºvcoreï¼Œè€ƒè™‘æ¯ä¸ªæœåŠ¡åˆå§‹åŒ–æ—¶å€™çš„å¹¶å‘è¿›ç¨‹æˆ–è€…å¹¶å‘ä»»åŠ¡çš„æ•°é‡ã€‚ ä¸¾ä¸ªæ —å­ï¼š æœåŠ¡ vcore Memory(GB) æ“ä½œç³»ç»Ÿ 1 8092 NodeManager 1 1024 DataNode 1 1024 Impala 0 0 RegionServer 0 0 Solr Server 0 0 available resource 45 251904 Total 48 262144 æ³¨ï¼šæ­¤è¡¨å±•ç¤ºçš„ä¸ºä¸€ä¸ª48C256Gçš„è®¡ç®—èŠ‚ç‚¹èµ„æºåˆ†é…ï¼Œ0ä¸ºä¸è¿è¡Œåœ¨æ­¤èŠ‚ç‚¹ã€‚ NodeManagerçš„åˆ†é… å±æ€§ é»˜è®¤å€¼ è§£é‡Š yarn.nodemanager.resource.cpu-vcores 8 å¯ä»¥åˆ†é…ç»™containerçš„vcoreæ•°ç›® yarn.nodemanager.resource.memory-mb 8g å¯ä»¥åˆ†é…ç»™containerçš„å†…å­˜æ€»æ•°(mb) æ ¹æ®ä¸Šé¢çš„æ —å­ï¼Œå‡è®¾æˆ‘ä»¬æœ‰10ä¸ªä¸€æ ·çš„workerèŠ‚ç‚¹ï¼Œé‚£ä¹ˆä¸Šé¢å±æ€§é…ç½®å¦‚ä¸‹ï¼š key value yarn.nodemanager.resource.cpu-vcores 192(4å€è¶…çº¿ç¨‹48*4) yarn.nodemanager.resource.memory-mb 251904mb Containerçš„åˆ†é… key default value explain yarn.scheduler.minimum-allocation-vcores 1 ä¸€ä¸ªcontaineræœ€å°å¯ç”³è¯·çš„vcoreæ•° yarn.scheduler.maximum-allocation-vcores 32 ä¸€ä¸ªcontaineræœ€å¤šå¯ç”³è¯·çš„vcoreæ•° yarn.scheduler.increment-allocation-vcores 1 å¢é•¿æ•° yarn.scheduler.minimum-allocation-mb 1024 ä¸€ä¸ªcontaineræœ€å°å¯ç”³è¯·å†…å­˜ yarn.scheduler.maximum-allocation-mb 8192 ä¸€ä¸ªcontaineræœ€å¤§å¯ç”³è¯·å†…å­˜ yarn.scheduler.increment-allocation-mb 512 å¢é•¿æ•° ä¸Šé¢å±æ€§å¯ä»¥æ ¹æ®å®é™…æƒ…å†µçš„ä»»åŠ¡è¿›è¡Œè°ƒèŠ‚ï¼Œè°ƒæ•´å®Œä¹‹åå¯ä»¥ç›´æ¥ä¼°ç®—åˆ°é›†ç¾¤åŒæ—¶èƒ½å¤Ÿè·‘å¤šå°‘ä¸ªcontainerã€‚å®é™…ä¸Šæˆ‘ä»¬ç”Ÿäº§ç¯å¢ƒæ˜¯ä½¿ç”¨cgroupåŠ ä¸Šfair-scheduleræ¥æ§åˆ¶containerçš„èµ„æºåˆ†é…ã€‚ MapReduceçš„é…ç½® key default value explain mapreduce.map.memory.mb 1GB åˆ†é…ç»™ä¸€ä¸ªjobçš„æ¯ä¸ªmapä»»åŠ¡çš„ç‰©ç†å†…å­˜æ€»æ•° mapreduce.map.java.opts.max.heap 800MB mapè¿›ç¨‹çš„æœ€å¤§java å †å¤§å°ï¼ˆå•ä½bï¼‰ mapreduce.map.cpu.vcores 1 åˆ†é…ç»™ä¸€ä¸ªjobçš„æ¯ä¸ªmapä»»åŠ¡çš„è™šæ‹Ÿæ ¸å¿ƒæ•° mapreduce.reduce.memory.mb 1GB åˆ†é…ç»™ä¸€ä¸ªjobçš„æ¯ä¸ªreduceä»»åŠ¡çš„ç‰©ç†å†…å­˜æ€»æ•°ï¼ˆMBï¼‰ mapreduce.reduce.java.opts.max.heap 800MB reduceè¿›ç¨‹çš„æœ€å¤§java å †å¤§å°ï¼ˆå•ä½bï¼‰ mapreduce.reduce.cpu.vcores 1 åˆ†é…ç»™ä¸€ä¸ªjobçš„æ¯ä¸ªreduceä»»åŠ¡çš„è™šæ‹Ÿæ ¸å¿ƒæ•° yarn.app.mapreduce.am.resource.mb 1GB ApplicationMasterçš„ç‰©ç†å†…å­˜éœ€æ±‚ï¼ˆMBï¼‰ yarn.app.mapreduce.am.command-opts 800MB AMçš„æœ€å¤§å †å¤§å°ï¼ˆå•ä½bï¼‰ yarn.app.mapreduce.am.resource.cpu-vcores 1 AMéœ€è¦çš„è™šæ‹Ÿæ ¸å¿ƒæ•° å±æ€§ mapreduce.[map| reduce].memory.mbæ˜¯æŒ‡å®šcontaineréœ€è¦åˆ†é…ç»™è¿™äº›mapå’Œreduceçš„å†…å­˜ï¼Œè¿™äº›å€¼åº”è¯¥è®¾ç½®æˆè¶…å‡ºæ•´ä¸ªä»»åŠ¡çš„å †å¤§å°Clouderaæ¨èçš„ä¹˜ç§¯å› å­æ˜¯0.8ã€‚å®é™…ä»»åŠ¡å†³å®šè¿™ä¸ªæœ€ä¼˜å€¼ã€‚ClouderaåŒæ ·æ¨èmapreduce.map.memory.mbçš„å€¼æ˜¯1-2GBå¹¶ä¸”è®¾ç½® mapreduce.reduce.memory.mbçš„å€¼æ˜¯ä¸¤å€çš„mapperå€¼ã€‚å¦‚æœå®é™…jobsæœ‰å¾ˆå¤šå¹¶å‘çš„ä»»åŠ¡ï¼Œéœ€è¦å¢åŠ AMçš„å †å¤§å°ã€‚ ä¸€ç‚¹æ„Ÿæƒ³å®é™…ä¸Šå½“æ—¶æˆ‘ä»¬çš„ç”Ÿäº§ç¯å¢ƒçš„èµ„æºæ§åˆ¶å±‚æ¬¡æ˜¯ï¼Œåº•å±‚ä½¿ç”¨cgroupæ§åˆ¶ï¼Œç”¨æˆ·å±‚é¢ä½¿ç”¨fair-schedulerè¿›è¡Œåˆ†é˜Ÿåˆ—æ§åˆ¶ã€‚å…·ä½“é…ç½®æ–¹æ³•å¯ä»¥å‚è€ƒæˆ‘çš„éƒ¨ç½²è„šæœ¬ã€‚ ç‚¹å‡»è¿™é‡Œ å‚è€ƒhttps://www.cloudera.com/documentation/enterprise/latest/topics/cdh_ig_yarn_tuning.html]]></content>
      <categories>
        <category>å¤§æ•°æ®</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[ç®¡ç†HDFSæœåŠ¡]]></title>
    <url>%2F2018%2F01%2F01%2Fmange-hdfs%2F</url>
    <content type="text"><![CDATA[å‰è¨€è¿™ç¯‡æ–‡ç« ä¸»è¦è®°å½•ä¸€ä¸‹æˆ‘ç®¡ç†HDFSé›†ç¾¤çš„æ—¶å€™é‡åˆ°ä¸€äº›å‘çš„å¡«å‘åŠæ³•ï¼Œç”¨æ¥æé†’è‡ªå·±ï¼Œä¹Ÿå¸Œæœ›å¯è¿ªä»–äººã€‚ğŸ˜„ NameNodeç®¡ç†å¤±æ•ˆçš„DataNodeä¸€èˆ¬åœ¨ä¸€æ®µæ—¶é—´ï¼ˆé»˜è®¤æ˜¯10åˆ†é’Ÿï¼‰Namenodeæ”¶ä¸åˆ°DataNodeçš„heartbeatså°±è®¤ä¸ºDNå¤±æ•ˆäº†ã€‚è¿™æ—¶å€™ï¼šNNä¼šæŸ¥æ‰¾å“ªäº›blockåœ¨è¿™ä¸ªå¤±æ•ˆçš„DNä¸Šï¼Œå¹¶å®šä½å…¶ä»–æ‹¥æœ‰è¿™äº›blockå¤‡ä»½çš„DNï¼Œè¿™äº›DNä¼šå°†è¿™äº›blockå¤åˆ¶åˆ°å¦å¤–çš„DNä¸Šï¼Œä»¥ç»´æŒè®¾ç½®çš„å¤åˆ¶å› å­æ•°ã€‚åŒæ—¶å°†å¤±æ•ˆçš„DNä¸‹çº¿ã€‚ é…ç½®DNçš„å­˜å‚¨å¹³è¡¡å½“æ—¶é‡åˆ°çš„ä¸€ä¸ªå‘æ˜¯æœºå™¨dnä¸Šé¢çš„ç£ç›˜å¤§å°ä¸ä¸€è‡´ï¼Œç„¶åé¦–å…ˆæ˜¯æƒ³åˆ°é…ç½®å­˜å‚¨å¹³è¡¡çœ‹èƒ½ä¸èƒ½è®©dnè‡ªå·±æå®šã€‚ å­˜å‚¨å¹³è¡¡å¯ä»¥é…ç½®ä¸¤ä¸ªä¸œè¥¿ï¼š DNå†…ä¸åŒå®¹é‡çš„ç£ç›˜å…è®¸å¤šå¤§çš„è¯¯å·®å°±è¢«è®¤ä¸ºæ˜¯å¹³è¡¡çš„ æœ‰å¤šå¤§æ¯”ä¾‹çš„blockä¼šå†™åˆ°DNä¸­å®¹é‡æ¯”è¾ƒå¤§çš„é‚£å—ç£ç›˜é‡Œé¢ã€‚ éœ€è¦é…ç½®çš„å±æ€§å¦‚ä¸‹ï¼šdfs.datanode.fsdataset.volume.choosing.policy / org.apache.hadoop.hdfs.server.datanode.fsdataset.AvailableSpaceVolumeChoosingPolicyï¼ˆä½¿å­˜å‚¨å¹³è¡¡ç”Ÿæ•ˆï¼‰dfs.datanode.available-space-volume-choosing-policy.balanced-space-threshold / 10737418240 (default) ï¼ˆè¿™ä¸ª10Gæ˜¯æŒ‡ä¸€ä¸ªDNå†…ç£ç›˜æœ€å¤§å’Œæœ€å°çš„å®¹é‡å·®è¦åœ¨10Gä¹‹å†…ï¼‰dfs.datanode.available-space-volume-choosing-policy.balanced-space-preference-fraction / 0.75(defalut) ï¼ˆç™¾åˆ†ä¹‹75çš„æ–°blkä¼šå‘é€çš„å®¹é‡æ›´å¤§çš„ç£ç›˜ä¸Šï¼‰é…ç½®åé‡å¯DNå³å¯ã€‚ dfs.datanode.du.reserved / 10GB æ¯ä¸€ä¸ªdnçš„æ¯ä¸€ä¸ªç›®å½•ä¿ç•™çš„éhdfsç©ºé—´ã€‚ åé¢å‘ç°å¹³è¡¡çš„æ•ˆæœå¹¶ä¸æ˜¯ç‰¹åˆ«ç†æƒ³ï¼Œä¸ç†æƒ³çš„åŸå› å…¶å®æ˜¯å› ä¸ºæ€»å¯ç”¨çš„å®¹é‡å¹¶ä¸æ˜¯hdfs reportçš„é‚£ä¸ªæ€»å¯ç”¨å®¹é‡ï¼›ä¸‹é¢åšä¸€ä¸ªæè¿°ã€‚çœ‹åˆ°ä¸Šå›¾ï¼Œè¿™ä¸ªç›˜æ˜¯243gï¼Œä½†æ˜¯ä»”ç»†ä¸€çœ‹ï¼Œused+avail != sizeã€‚ã€‚231g != 243gã€‚ã€‚å†çœ‹ä¸€ä¸‹hdfs reportå‡ºæ¥çš„ç»“æœï¼šä¸€çœ‹å¥½åƒæ²¡å•¥ç‰¹åˆ«ï¼Œä½†æ˜¯ä»”ç»†ä¸€è§‚å¯Ÿï¼ŒDFS Remainingæ€ä¹ˆå°±æ¯”ç£ç›˜çš„availè¿˜è¦å¤§å‘¢ã€‚ã€‚è¿™æ˜¯è¦å†™çˆ†ç›˜çš„èŠ‚å¥å—ã€‚ã€‚ã€‚å…¶å®è¿™é‡Œçš„åŸç†æ˜¯ï¼ŒConfigured Capacityæ˜¯ç­‰äºç£ç›˜æ€»å®¹é‡å‡å»æˆ‘ä»¬ä¸Šé¢é…ç½®çš„é‚£ä¸ªdu.reservedçš„å€¼ï¼Œä¹Ÿå°±æ˜¯243-10ï¼Œå°±æ˜¯233å·¦å³ï¼Œç„¶åhdfsè®¤ä¸ºå·²ç»ç»™ä½ é¢„ç•™äº†ï¼Œå‰©ä¸‹çš„éƒ½å¯ä»¥å†™æ•°æ®äº†ã€‚ä½†æ˜¯ï¼Œå®é™…ä¸Šæ˜¯ä¸è¡Œçš„ã€‚ã€‚å› ä¸ºè¿™ä¸ªç£ç›˜æœ¬æ¥å¯ç”¨å°±å°‘äº†12gã€‚æ‰€ä»¥å°±ä¼šå‡ºç°ä½ ä¿¡å¿ƒæ»¡æ»¡çš„é…ç½®å¥½äº†ä¸Šé¢çš„å±æ€§ä¹‹åï¼Œä»ç„¶ä¼šå†™çˆ†ç£ç›˜çš„æƒ…å†µã€‚ã€‚è§£å†³åŠæ³•æ˜¯å°†du.reservedçš„å€¼è®¾ç½®å¤§ä¸€ç‚¹ï¼Œä»¤åˆ°hdfsåšå®Œå‡æ³•ä¹‹åDFS Remainingè¦å°‘äºavailå°±å¥½äº†ã€‚ä½†æ˜¯å¯¹äºè¿½æ±‚ç¨³å®šå®Œç¾çš„è¿ç»´æ¥è¯´ï¼Œå¥½åƒè¿˜æ˜¯ä¸é‚£ä¹ˆèˆ’æœï¼Œå› ä¸ºæ€»æ˜¯æ„Ÿè§‰ä¸€è¾¹å¤§ä¸€è¾¹å°ï¼Œèµ„æºåˆ©ç”¨ç‡ä¸æ˜¯é‚£ä¹ˆé«˜ã€‚äºæ˜¯æˆ‘ä»¬å°±æƒ³ç€æŠŠç£ç›˜éƒ½ææˆä¸€æ ·å¤§çš„ã€‚é€šè¿‡è®¨è®ºï¼Œæˆ‘ä»¬åšäº†å¦‚ä¸‹æ“ä½œï¼š ä¸€ä¸ªdnä¸Šç£ç›˜å¤§å°ä¸ä¸€è‡´çš„æ—¶å€™ï¼Œ å¯ä»¥å°†æ•°æ®ç›®å½•ç§»åˆ°å¤§çš„ç£ç›˜ä¸Šï¼Œç„¶ååšä¸€ä¸ªè½¯è¿æ¥åˆ°åŸæ¥çš„ç›®å½•ä¸Šã€‚å°†è½¯è¿æ¥å†™åˆ°é…ç½®æ–‡ä»¶ä¸­å³å¯ã€‚å½“ç„¶è¿™æ˜¯åœ¨æœ‰æ•°æ®çš„æ—¶å€™ã€‚ä¹Ÿå¯ä»¥ä½¿ç”¨å°†dnä¸‹çº¿çš„åŠæ³•å†æ›´æ¢æ•°æ®ç›®å½•ã€‚è½¯è¿æ¥çš„æƒé™ä¸å½±å“ï¼Œå®ä½“ç›®å½•çš„æƒé™æ‰éœ€è¦é…ç½®æ­£ç¡®. è¿™æ ·æˆ‘ä»¬å°±å¯ä»¥æŠŠå°çš„ç£ç›˜å»æ‰ï¼Œç•™ä¸€ä¸ªè½¯è¿æ¥å°±å¥½äº†ã€‚ é…ç½®æœ¬åœ°è¯»ï¼ˆShort-circuit readï¼‰é…ç½®å¦‚ä¸‹ï¼š åœ¨hdfs-site.xmlæ–‡ä»¶ä¸­æ·»åŠ ï¼š &lt;property&gt; &lt;name&gt;dfs.client.read.shortcircuit&lt;/name&gt; &lt;value&gt;true&lt;/value&gt; &lt;/property&gt; &lt;property&gt; &lt;name&gt;dfs.client.read.shortcircuit.streams.cache.size&lt;/name&gt; &lt;value&gt;1000&lt;/value&gt; &lt;/property&gt; &lt;property&gt; &lt;name&gt;dfs.client.read.shortcircuit.streams.cache.expiry.ms&lt;/name&gt; &lt;value&gt;10000&lt;/value&gt; &lt;/property&gt; &lt;property&gt; &lt;name&gt;dfs.domain.socket.path&lt;/name&gt; &lt;value&gt;/var/run/hadoop-hdfs/dn&lt;/value&gt; &lt;/property&gt; HDFS balancersbalancerä¼šç§»åŠ¨blockå’Œdataç›´åˆ°æ¯ä¸€ä¸ªDNçš„ç”¨é‡å’Œé›†ç¾¤çš„ç”¨é‡ä¸è¶…è¿‡ä¸€ä¸ªç»™å®šçš„é˜ˆå€¼ã€‚ï¼ˆæ¯ä¸€ä¸ªDNçš„ç”¨é‡æŒ‡è¯¥èŠ‚ç‚¹ä¸­ä½¿ç”¨çš„ç©ºé—´å æ•´ä¸ªèŠ‚ç‚¹çš„ç©ºé—´çš„ç™¾åˆ†æ¯”ï¼Œè€Œé›†ç¾¤çš„ç”¨é‡æ˜¯æŒ‡æ•´ä¸ªé›†ç¾¤çš„ä½¿ç”¨ç™¾åˆ†æ¯”ï¼‰ã€‚balancerå¹¶ä¸ä¼šå¹³è¡¡ä¸€ä¸ªDNå†…éƒ¨ä¸åŒç£ç›˜çš„å®¹é‡ã€‚ï¼ˆæ¯”å¦‚ä¸€ä¸ªDNä¸­æœ‰ä¸¤ä¸ªç›®å½•æ•°æ®é‡ä¸ä¸€æ ·ï¼Œä½†æ˜¯balancerä¸ä¼šä»¤åˆ°ä¸¤ä¸ªç›®å½•æ•°æ®å¹³å‡åˆ†ï¼‰ã€‚è¿è¡Œbalancerçš„å‘½ä»¤ï¼š sudo -u hdfs hdfs balancer ï¼ˆä¸åŠ ä»»ä½•å‚æ•°çš„æƒ…å†µä¸‹é»˜è®¤çš„thresholdä¸º10%ï¼Œè¿™ä¸ª10%çš„æ„æ€æ˜¯æ¯”å¦‚æ•´ä¸ªé›†ç¾¤çš„ç”¨é‡æ˜¯40%ï¼Œbalancerä¼šä¿è¯æ¯ä¸ªDNçš„ç£ç›˜ç”¨é‡ä¼šåœ¨30%å’Œ50%ï¼ˆå é‚£ä¸ªDNçš„æ€»é‡ï¼‰ä¹‹é—´ã€‚ï¼‰ sudo -u hdfs hdfs balancer -threshold 5ï¼ˆ5%ï¼‰åŒæ—¶è¿˜å¯ä»¥è°ƒæ•´balancerçš„ç½‘ç»œå¸¦å®½ï¼š hdfs dfsadmin -setBalancerBandwidth &#60;newbandwidth&#62; é…ç½®NFS gatewayNFSv3 gatewayå…è®¸å®¢æˆ·ç«¯å°† HDFS mountåˆ°æœ¬åœ°æ–‡ä»¶ç³»ç»Ÿã€‚è¿™ä¸ªgatewayå¯ä»¥æ˜¯é›†ç¾¤ä¸­çš„ä»»æ„ä¸€å°æœºå™¨ã€‚å®‰è£…é…ç½®æ­¥éª¤ï¼š å®‰è£…æ‰€éœ€çš„è½¯ä»¶åŒ…ï¼š sudo yum install nfs-utils nfs-utils-lib hadoop-hdfs-nfs3 rpcbind* åœ¨NNä¸Šçš„hdfs-site.xmlä¸­é…ç½®å¦‚ä¸‹å±æ€§ï¼š &lt;property&gt; &lt;name&gt;dfs.namenode.accesstime.precision&lt;/name&gt; &lt;value&gt;3600000&lt;/value&gt; &lt;/property&gt; åœ¨NFS serverä¸­çš„hdfs-site.xmlæ·»åŠ ï¼š &lt;property&gt; &lt;name&gt;dfs.nfs3.dump.dir&lt;/name&gt; &lt;value&gt;/tmp/.hdfs-nfs&lt;/value&gt; &lt;/property&gt; åœ¨NNçš„core-site.xmlä¸­æ·»åŠ ä»£ç†ç”¨æˆ·ï¼š &lt;property&gt; &lt;name&gt;hadoop.proxyuser.hdfs.groups&lt;/name&gt; &lt;value&gt;*&lt;/value&gt; &lt;/property&gt; &lt;property&gt; &lt;name&gt;hadoop.proxyuser.hdfs.hosts&lt;/name&gt; &lt;value&gt;*&lt;/value&gt; &lt;/property&gt; é‡å¯NN åœ¨NFSæœåŠ¡å™¨ä¸Šï¼š sudo service nfs stopsudo service hadoop-hdfs-nfs3 start æ£€æŸ¥æ˜¯å¦æ­£å¸¸å·¥ä½œï¼š rpcinfo -p &lt;nfs_server_ip_address&gt;; éªŒè¯hdfsæ˜¯å¦å¯ä»¥è¢«mountï¼Œä½¿ç”¨showmountå‘½ä»¤ï¼š showmount -e &lt;nfs_server_ip_address&gt;; æŒ‚è½½hdfsï¼š mount -t nfs -o vers=3,proto=tcp,nolockï¼Œnoatime &lt;nfs_server_hostname&gt;:/ /&lt;hdfs_nfs_mount&gt; è¿™ä¸ªæœåŠ¡åªè¯†åˆ«UIDå’ŒGIDï¼Œå¦‚æœä¸åŒæœºå™¨çš„ç”¨æˆ·UIDå’ŒGIDä¸åŒï¼Œmountä¸Šå»ä¹‹åï¼Œæ–‡ä»¶åœ¨ä¸åŒæœºå™¨ä¾¿ä¼šæ˜¾ç¤ºå±äºä¸ç”¨çš„ç”¨æˆ· å¦‚æœä½¿ç”¨äº†kerberosè®¤è¯ï¼Œåˆ™éœ€è¦åœ¨nfs serverçš„hdfs-site.xmlæ–‡ä»¶é‡Œé¢åŠ ä¸Šä»¥ä¸‹å±æ€§ï¼š &lt;property&gt; &lt;name&gt;dfs.nfs.keytab.file&lt;/name&gt; &lt;value&gt;/etc/hadoop/conf/hdfs.keytab&lt;/value&gt; &lt;/property&gt; &lt;property&gt; &lt;name&gt;dfs.nfs.kerberos.principal&lt;/name&gt; &lt;value&gt;hdfs/_HOST@YOUR-REALM.COM&lt;/value&gt; &lt;/property&gt; è®¾ç½®HDFSçš„Quotashdfs quotasæœ‰ä»¥ä¸‹ä¸¤ç§å½¢å¼ï¼š é™åˆ¶æŸä¸ªç›®å½•ä¸‹çš„æ–‡ä»¶æ•°é‡ é™åˆ¶æŸä¸ªç›®å½•çš„ç©ºé—´å¤§å° ä¸Šé¢ä¸¤ç§å½¢å¼æ˜¯ç‹¬ç«‹çš„ï¼Œæ–‡ä»¶æˆ–è€…ç›®å½•çš„åˆ›å»ºå¦‚æœä¼šå¼•èµ·quotaè¶…å‡ºåˆ™ä¼šå¤±è´¥ã€‚ å¯ç”¨hdfs space quotasï¼šhdfs dfsadmin -setSpaceQuota n dir ï¼ˆä¸Šé¢næ˜¯å­—èŠ‚æ•°ï¼Œdiræ˜¯éœ€è¦è®¾ç½®é™é¢çš„ç›®å½•ã€‚åé¢å¯ä»¥æ¥å¤šä¸ªç›®å½•ï¼Œnåˆ™ä¼šå¯¹è¿™å¤šä¸ªç›®å½•ç”Ÿæ•ˆã€‚ï¼‰å–æ¶ˆhdfs space quotasï¼šhdfs dfsadmin -clrSpaceQuota dir ï¼ˆdir æ˜¯éœ€è¦è®¾ç½®çš„ç›®å½•ï¼Œåé¢å¯æ¥å¤šä¸ªï¼‰ å¯ç”¨hdfs name quotasï¼šhdfs dfsadmin -setQuota n dir ï¼ˆnä»£è¡¨ç›®å½•å’Œæ–‡ä»¶æ•°é‡ï¼Œdiræ˜¯éœ€è¦è®¾ç½®çš„ç›®å½•ï¼Œåé¢å¯æ¥å¤šä¸ªï¼Œnåˆ™ä¼šå¯¹å¤šä¸ªç”Ÿæ•ˆã€‚æ¯”å¦‚næ˜¯1ï¼Œåˆ™ä¸èƒ½å¾€ç›®å½•æ”¾ä»»ä½•ä¸œè¥¿ï¼Œ1ä»£è¡¨ç›®å½•æœ¬èº«ï¼Œè¦ä»2å¼€å§‹ï¼‰å–æ¶ˆhdfs name quotasï¼šhdfs dfsadmin -clrQuotas dir ï¼ˆdiræ˜¯éœ€è¦è®¾ç½®çš„ç›®å½•ï¼Œåé¢å¯æ¥å¤šä¸ªï¼‰ é…ç½®å¯æŒ‚è½½çš„HDFS å®‰è£…hadoop-hdfs-fuseï¼š sudo yum install hadoop-hdfs-fuse åˆ›å»ºæŒ‚è½½ç‚¹ï¼š mkdir -p &lt;mount_point&gt;; hadoop-fuse-dfs dfs://&lt;nameservice_id&gt;; &lt;mount_point&gt; å¸è½½æŒ‚è½½ç‚¹ï¼š umount &lt;mount_point&gt; é…ç½®ä¸­å¤®ç¼“å­˜ç®¡ç†è¿™æ˜¯ä¸€ä¸ªç²¾ç¡®çš„ç¼“å­˜æœºåˆ¶ï¼Œå®ƒå…è®¸ç”¨æˆ·ç¼“å­˜hdfsä¸ŠæŸä¸€ä¸ªè·¯å¾„ä¸‹çš„æ–‡ä»¶ã€‚å¯ä»¥é˜²æ­¢å¸¸ç”¨çš„æ•°æ®è¢«æ¸…å‡ºå†…å­˜ï¼ŒNNç®¡ç†ç¼“å­˜ä¾¿äºä½œä¸šçš„å®‰æ’ä¸è°ƒåº¦ï¼ŒåŒæ—¶å¯ä»¥æé«˜æ•´ä¸ªé›†ç¾¤çš„å†…å­˜åˆ©ç”¨ç‡ï¼ˆé€šè¿‡æŒ‡å®šæŸäº›å‰¯æœ¬ï¼Œä»è€Œå…å»å…¨éƒ¨å‰¯æœ¬ç¼“å­˜bufferçš„å¼€é”€ï¼‰ã€‚åœ¨ä¸Šé¢çš„æ¶æ„ä¸­ï¼ŒNNè´Ÿè´£åè°ƒé›†ç¾¤ä¸­æ‰€æœ‰DNçš„å†…å­˜ã€‚NNä¼šå®šæœŸæ”¶åˆ°æ¥è‡ªé›†ç¾¤ä¸­çš„æ¯ä¸€ä¸ªDNæè¿°å„è‡ªå—ç¼“å­˜çš„æƒ…å†µã€‚NNç®¡ç†DNç¼“å­˜æ˜¯é€šè¿‡ä½¿ç”¨æå¸¦ç¡®è®¤æ ‡å¿—çš„å¿ƒè·³ä¿¡å·ä¼ é€ç¼“å­˜æˆ–è€…æ¥æ”¶ç¼“å­˜å‘½ä»¤ã€‚NNé€šè¿‡æŸ¥çœ‹å®ƒè‡ªèº«çš„ç¼“å­˜æŒ‡ä»¤é›†å»å†³å®šä»€ä¹ˆæ–‡ä»¶æˆ–ç›®å½•åº”è¯¥è¢«ç¼“å­˜ã€‚ç¼“å­˜æŒ‡ä»¤è¢«æŒä¹…å­˜å‚¨åœ¨FsImageå’ŒEditLogä¸Šé¢ï¼Œå¹¶ä¸”å¯ä»¥ä½¿ç”¨å‘½ä»¤è¡Œæˆ–è€…javaæ¥å£å»å¢åˆ æ”¹ã€‚NNåŒæ—¶ä¹Ÿä¿å­˜äº†ä¸€ç³»åˆ—ç¼“å­˜æ± ï¼Œç”¨æ¥åˆ†ç±»ç®¡ç†å±äºèµ„æºç®¡ç†çš„ç¼“å­˜å‘½ä»¤å’Œæ‰§è¡Œæƒé™çš„ç¼“å­˜å‘½ä»¤ã€‚NNä¼šå®šæœŸé‡å¤æ‰«æå‘½åç©ºé—´å’Œç°æœ‰çš„ç¼“å­˜ç›®å½•å»å†³å®šå“ªäº›å—éœ€è¦è¢«ç¼“å­˜æˆ–è€…è§£é™¤ç¼“å­˜å¹¶åˆ†é…ç¼“å­˜åˆ°DNã€‚ç”¨æˆ·å¢åŠ æˆ–è€…åˆ é™¤ç¼“å­˜æŒ‡ä»¤æˆ–è€…åˆ é™¤ç¼“å­˜æ± åŒæ ·ä¼šè§¦å‘é‡å¤æ‰«æã€‚ç¼“å­˜æŒ‡ä»¤å®šä¹‰äº†ä¸€ä¸ªéœ€è¦è¢«ç¼“å­˜çš„è·¯å¾„ã€‚è·¯å¾„å¯ä»¥æ˜¯æ–‡ä»¶æˆ–è€…ç›®å½•ã€‚ç›®å½•å¹¶ä¸ä¼šè¢«å¾ªç¯ç¼“å­˜ï¼Œä¹Ÿå³æ˜¯åªæœ‰ç¬¬ä¸€å±‚ç›®å½•çš„æ–‡ä»¶ä¼šè¢«ç¼“å­˜ã€‚ç¼“å­˜æŒ‡ä»¤çš„å‚æ•°æœ‰è¯¸å¦‚ç¼“å­˜å¤åˆ¶å› å­å’Œè¿‡æœŸæ—¶é—´ã€‚è¿™é‡Œçš„å¤åˆ¶å› å­è¡¨ç¤ºblkéœ€è¦è¢«ç¼“å­˜çš„å‰¯æœ¬æ•°ã€‚å¦‚æœå‡ºç°å¤šä¸ªç¼“å­˜æŒ‡ä»¤æŒ‡å‘åŒä¸€ä¸ªæ–‡ä»¶ï¼Œåˆ™ä¼šå–æœ€å¤§çš„å¤åˆ¶å› å­æ•°ã€‚ç¼“å­˜æ± æ˜¯ç”¨äºå°†ç¼“å­˜æŒ‡ä»¤åˆ†ç»„ç®¡ç†ã€‚ç¼“å­˜æ± çš„æƒé™ç®¡ç†å°±ç±»ä¼¼äºUNIXã€‚å†™æƒé™å…è®¸ç”¨æˆ·å¢åŠ å’Œåˆ é™¤æ± ä¸­çš„ç¼“å­˜æŒ‡ä»¤ã€‚è¯»æƒé™å…è®¸ç”¨æˆ·åˆ—å‡ºæ± ä¸­çš„ç¼“å­˜æŒ‡ä»¤å’Œä¸€äº›å…ƒæ•°æ®ã€‚æ‰§è¡Œæƒé™æœªè¢«ä½¿ç”¨ã€‚ç¼“å­˜æ± åŒæ ·è¢«ç”¨æ¥ä½œèµ„æºç®¡ç†ã€‚ç¼“å­˜æ± å¯ä»¥é™åˆ¶æ± ä¸­æ‰€æœ‰ç¼“å­˜æŒ‡ä»¤å¯ç¼“å­˜çš„å­—èŠ‚æ•°å’Œæœ€å¤§çš„è¿‡æœŸæ—¶é—´ã€‚ ç¼“å­˜æŒ‡ä»¤çš„å‘½ä»¤ï¼š æ–°å¢ï¼šhdfs cacheadmin -addDirective -path &#60;path&#62; -pool &#60;pool-name&#62; [-force] [-replication &#60;replication&#62;] [-ttl &#60;time-to-live&#62;]ï¼ˆpathæŒ‡éœ€è¦è¢«ç¼“å­˜çš„ç›®å½•æˆ–è€…æ–‡ä»¶çš„è·¯å¾„ï¼Œpool-nameæŒ‡è·¯å¾„åŠ åˆ°é‚£ä¸ªæ± ä¸­ï¼Œè¿™é‡Œéœ€è¦æ‹¥æœ‰å†™æƒé™ã€‚forceæŒ‡è·³è¿‡æ£€æŸ¥ç¼“å­˜æ± çš„èµ„æºé™åˆ¶ã€‚replicationæŒ‡å¤åˆ¶å› å­ï¼Œé»˜è®¤æ˜¯1ã€‚time-to-liveæŒ‡ç¼“å­˜ç”Ÿæ•ˆæ—¶é—´ã€‚å¯ä»¥ä½¿ç”¨ç§’ï¼Œåˆ†ï¼Œæ—¶æˆ–è€…æ—¥ä½œä¸ºå•ä½ï¼Œä¾‹å¦‚ï¼š30m,4h,20dã€‚neveråˆ™æ˜¯æ°¸ä¸è¿‡æœŸã€‚é»˜è®¤æ˜¯neverï¼‰ åˆ é™¤ï¼šhdfs cacheadmin -removeDirective &#60;id&#62;ï¼ˆidæŒ‡éœ€è¦è¢«åˆ é™¤çš„ç¼“å­˜æŒ‡ä»¤çš„idï¼Œå¯ä»¥ä½¿ç”¨listæŸ¥çœ‹ï¼Œéœ€è¦æœ‰å†™æƒé™ï¼‰ hdfs cacheadmin -removeDirectives &#60;path&#62; ï¼ˆpathæŒ‡è·¯å¾„ä¸­çš„æ‰€æœ‰ç¼“å­˜æŒ‡ä»¤ï¼Œéœ€è¦å†™æƒé™ï¼‰ åˆ—ä¸¾ï¼šhdfs cacheadmin -listDirectives [-stats] [-path &#60;path&#62;] [-pool &#60;pool&#62;] ï¼ˆpathæŒ‡è¯¥è·¯å¾„çš„ç¼“å­˜æŒ‡ä»¤ï¼Œéœ€è¦è¯»æƒé™ã€‚poolæŒ‡è¯¥æ± ä¸­å±äºé‚£ä¸ªè·¯å¾„çš„æŒ‡ä»¤ã€‚statsæŒ‡ç»Ÿè®¡ä¿¡æ¯ï¼‰ ç¼“å­˜æ± å‘½ä»¤ï¼š æ–°å¢ï¼šhdfs cacheadmin -addPool &#60;name&#62; [-owner &#60;owner&#62;] [-group &#60;group&#62;] [-mode &#60;mode&#62;] [-limit &#60;limit&#62;] [-maxTtl &#60;maxTtl&#62;] ï¼ˆnameæŒ‡æ± çš„åå­—ã€‚ownerå¯æŒ‡å®šï¼Œé»˜è®¤æ˜¯å½“å‰ç”¨æˆ·ã€‚groupæŒ‡æ± çš„åˆ†ç»„ã€‚modeæŒ‡æƒé™ï¼Œé»˜è®¤æ˜¯0755ã€‚limitæŒ‡æ± ä¸­æ‰€æœ‰æŒ‡ä»¤æ€»å…±å¯ä»¥ç¼“å­˜çš„å­—èŠ‚æ•°ï¼Œé»˜è®¤æ˜¯æ— é™åˆ¶ã€‚maxTtlæŒ‡æ± ä¸­æŒ‡ä»¤æœ€å¤§çš„è¿‡æœŸæ—¶é—´ï¼Œé»˜è®¤æ²¡æœ‰æœ€å¤§å€¼ï¼‰ ä¿®æ”¹ï¼šhdfs cacheadmin -modifyPool &#60;name&#62; [-owner &#60;owner&#62;] [-group &#60;group&#62;] [-mode &#60;mode&#62;] [-limit &#60;limit&#62;] [-maxTtl &#60;maxTtl&#62;] åˆ é™¤ï¼šhdfs cacheadmin -removePool &#60;name&#62; åˆ—ä¸¾ï¼šhdfs cacheadmin -listPools [-stats] [&#60;name&#62;] ï¼ˆstatsæŒ‡ç»Ÿè®¡ä¿¡æ¯ï¼‰ é…ç½®ç¼“å­˜ï¼š libhadoop.so è®¾ç½®hdfs-site.xmlé‡Œé¢çš„dfs.datanode.max.locked.memoryå±æ€§ï¼ˆéœ€è¦è€ƒè™‘ä¸ºDNï¼Œjvm heapå’Œæ“ä½œç³»ç»Ÿçš„é¡µç¼“å­˜é¢„ç•™å†…å­˜ï¼‰ è°ƒæ•´ulimit -l å‡ºæ¥çš„å€¼å¿…é¡»è¦æ¯”ä¸Šé¢è®¾ç½®çš„å±æ€§å€¼è¦å¤§æˆ–è€…å€¼æ˜¯æ²¡æœ‰é™åˆ¶ã€‚ï¼ˆéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œä¸Šé¢å±æ€§çš„valueçš„å•ä½æ˜¯bï¼Œè€Œulimit -lçš„å•ä½æ˜¯KBï¼‰ å‚è€ƒhttps://www.cloudera.com/documentation/enterprise/latest/topics/admin_hdfs_config.html]]></content>
      <categories>
        <category>å¤§æ•°æ®</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[Ansibleéƒ¨ç½²CDH]]></title>
    <url>%2F2017%2F12%2F30%2Fansible-deploy-cdh%2F</url>
    <content type="text"><![CDATA[éƒ¨ç½²å‡†å¤‡æœ¬æ¬¡éƒ¨ç½²é‡‡ç”¨ansibleï¼Œä»¥åŠCDH(cloudera hadoop)ã€‚ç”±äºä½œä¸ºä¾‹å­ï¼Œä»…å±•ç¤ºæœ€å°åŒ–çš„é›†ç¾¤éƒ¨ç½²ï¼ˆå…­ä¸ªèŠ‚ç‚¹ï¼‰ã€‚è¯¦ç»†éƒ¨ç½²æ–¹å¼å¯ä»¥å‚è€ƒå®˜æ–¹æ–‡æ¡£ã€‚ ç‚¹å‡»è¿™é‡Œ è§’è‰²åˆ†é…cdh-test-01: nn, rm, hmastercdh-test-02: nn, rm, hmastercdh-test-03: dn, nm, zk, jn, rscdh-test-04: dn, nm, zk, jn, rscdh-test-05: dn, nm, zk, jn, rscdh-test-client: hive, spark, hue, jhs-httpfs, hbase-thriftserver, mysql æ³¨ï¼šæˆ‘æ„Ÿè§‰è¯»è¿™ç¯‡æ–‡ç« çš„ä½ è‚¯å®šèƒ½çŒœåˆ°ä¸Šé¢çš„ç¼©å†™æ˜¯ä»€ä¹ˆå‘¢ã€‚ğŸ˜ éƒ¨ç½²ç»†èŠ‚æˆ‘ä½¿ç”¨ansibleéƒ¨ç½²è¿™å¥—cdhé›†ç¾¤çš„æ—¶å€™ï¼Œé‡åˆ°çš„éš¾é¢˜ä¸»è¦æ˜¯å¦‚ä½•ä»¤åˆ°æ•´ä¸ªéƒ¨ç½²è¿‡ç¨‹æ›´åŠ é¡ºæ»‘ã€‚è¿™é‡Œé¢å…¶å®å°±æ˜¯ansibleçš„ä½¿ç”¨å“²å­¦ï¼Œä¸»æœºç»„çš„å®šä¹‰ä»¥åŠroleçš„ç¼–æ’ã€‚è¿™é‡Œé¢æˆ‘ç›®å‰æƒ³åˆ°çš„æ˜¯ä¸¤ç§ç¼–å†™ansibleè„šæœ¬çš„æ–¹å¼ã€‚ä¸€ç§æ˜¯ä¸€ä¸ªç»„ä»¶ä¸€ä¸ªroleä¸€ä¸ªå¯¹åº”çš„ä¸»æœºç»„ï¼Œæ¯”å¦‚ï¼Œhdfsè¿™ä¸€ä¸ªç»„ä»¶å†™æˆä¸€ä¸ªroleï¼Œä¸»æœºç»„é‡Œé¢å†™hdfséœ€è¦çš„å…¨éƒ¨ä¸»æœºï¼Œç„¶åroleé‡Œé¢çš„taskå°±éœ€è¦å†™å¾—æ¯”è¾ƒå¤æ‚ä¸€ç‚¹ï¼Œå› ä¸ºä¸åŒä¸»æœºå®‰è£…ä¸åŒçš„åŒ…å’Œä¸‹å‘ä¸åŒçš„é…ç½®æ–‡ä»¶ï¼›å¦ä¸€ç§æ˜¯ä»¥ä¸»æœºè§’è‰²åŒºåˆ†roleï¼Œä¸»æœºç»„ä¹Ÿæ˜¯ä»¥ä¸»æœºè§’è‰²è¿›è¡Œç¼–æ’ã€‚æ¯”å¦‚ï¼Œå‰é¢ä¸¤å°æœºcdh-test-0[1,2]æˆ‘å®šä¹‰åœ¨äº†hadoop-masterå’Œhbase-masterçš„ç»„é‡Œé¢ï¼Œcdh-test-0[3,4,5]æˆ‘å®šä¹‰åœ¨äº†hadoop-slaveå’Œhbase-slaveçš„ç»„é‡Œé¢ï¼Œåˆ†åˆ«å¯¹åº”ä¸åŒçš„roleï¼Œroleé‡Œé¢çš„taskå°±å¯ä»¥å†™å¾—æ¯”è¾ƒç®€å•ï¼Œåªéœ€è¦å…³æ³¨æŸä¸€ä¸ªè§’è‰²çš„å®‰è£…åŒ…å’Œé…ç½®æ–‡ä»¶å³å¯ã€‚åŒæ—¶ï¼Œæ¯ä¸ªç»„çš„é…ç½®æ–‡ä»¶æ‰€éœ€è¦çš„å˜é‡éƒ½é…ç½®åœ¨è¯¥ç»„çš„group_varsé‡Œé¢ï¼Œè¿™æ ·åšå¯ä»¥ä»¤åˆ°éƒ¨ç½²çš„æ¡ç†è¾ƒä¸ºæ¸…æ™°ï¼Œä¾¿äºæ—¥åç»´æŠ¤ã€‚ é™¤äº†ä»¥ä¸Šè¿˜éœ€è¦è®°å½•å‡ ç‚¹ï¼š ä½¿ç”¨äº†kerberosæé«˜é›†ç¾¤çš„å®‰å…¨æ€§ï¼Œè®¿é—®æ•°æ®ä»¥åŠæäº¤ä»»åŠ¡éƒ½éœ€è¦ä½¿ç”¨å¯¹åº”ç”¨æˆ·çš„keytabï¼Œéœ€æ­å»ºkrbè®¤è¯æœåŠ¡å’ŒdnsæœåŠ¡,ç”Ÿæˆç”¨æˆ·keytabå’ŒæœåŠ¡keytab hiveçš„metastoreä½¿ç”¨çš„æ˜¯remoteæ–¹å¼ï¼Œæš‚æ—¶å°†mysqlè£…åœ¨clientèŠ‚ç‚¹ä¸Šï¼Œæ˜¯å•èŠ‚ç‚¹ï¼Œç”Ÿäº§ç¯å¢ƒéœ€è¦æ­å»ºä¸»ä»å¯åˆ‡æ¢ é›†ç¾¤çš„åº•å±‚èµ„æºæ§åˆ¶ä½¿ç”¨çš„æ˜¯cgroupï¼Œcgroupå¯ä»¥æ›´å¥½åœ°å°†ä¸»æœºèµ„æºè¿›è¡Œæœ‰æ•ˆåˆ†é…ï¼Œä»»åŠ¡å±‚é¢çš„èµ„æºè°ƒåº¦ä½¿ç”¨çš„æ˜¯fair-scheduler é…ç½®æ–‡ä»¶é‡Œé¢æ¶‰åŠåˆ°å¸å·å¯†ç ç­‰æ•æ„Ÿä¿¡æ¯å»ºè®®ä½¿ç”¨ansible-valutæ¥è¿›è¡ŒåŠ å¯† å®‰è£…è„šæœ¬https://github.com/LEUNGUU/ansible-cdhæ¬¢è¿æ‰¹è¯„æŒ‡æ­£ï¼Œè°¢è°¢ï¼ğŸ˜„]]></content>
      <categories>
        <category>å¤§æ•°æ®</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[Hbaseæ¶æ„]]></title>
    <url>%2F2017%2F12%2F30%2FHbase-architecture%2F</url>
    <content type="text"><![CDATA[åœ¨ä»‹ç»hbaseä¸»è¦çš„è§’è‰²HMasterå’ŒRegionserverçš„æ—¶å€™ï¼Œæˆ‘ä»¬å…ˆæ¥çœ‹çœ‹å…ƒæ•°æ®è¡¨hbase:metaã€‚åœ¨0.96ä¹‹å‰ï¼Œå…ƒæ•°æ®è¡¨æ˜¯åˆ†æˆ-ROOT-å’Œ.META.ä¸¤å¼ è¡¨çš„ï¼Œ0.96ä¹‹åç»Ÿä¸€å˜æˆhbase:metaäº†ã€‚æˆ‘ä»¬ä¸»è¦ä»‹ç»ä¸€ä¸‹hbase:metaã€‚ hbase:metahbase:metaæ˜¯ä¸€å¼ ä¿å­˜äº†æ‰€æœ‰regionä¿¡æ¯çš„å‚¨å­˜åœ¨zookeeperé‡Œé¢çš„è¡¨ã€‚è¡¨ç»“æ„å¦‚ä¸‹ï¼š KeyRegion key of the format ([table],[region start key],[region id]) Valuesinfo:regioninfo (serialized HRegionInfo instance for this region)info:server (server:port of the RegionServer containing this region)info:serverstartcode (start-time of the RegionServer process containing this region) ä»¥ä¸‹å‡ ç‚¹å€¼å¾—æ³¨æ„ï¼š å½“ä¸€ä¸ªregionæ­£åœ¨åˆ†è£‚çš„æ—¶å€™ï¼Œä¼šäº§ç”Ÿå¦å¤–ä¸¤åˆ—ï¼Œåˆ†åˆ«æ˜¯info:splitAå’Œinfo:splitBï¼Œå½“regionå®Œæˆåˆ†è£‚ä¹‹åï¼Œè¿™ä¸¤åˆ—å°±ä¼šè¢«åˆ é™¤ã€‚ HRegionInfoæ˜¯ç”¨æ¥è¡¨ç¤ºtableçš„å¼€å§‹å’Œç»“æŸã€‚å¦‚æœä¸€ä¸ªregionæœ‰ä¸€ä¸ªempty start keyåˆ™è¡¨ç¤ºå®ƒæ˜¯è¿™ä¸ªè¡¨çš„ç¬¬ä¸€ä¸ªregionï¼›å¦‚æœä¸€ä¸ªregionåŒæ—¶æœ‰start keyå’Œend keyåˆ™è¡¨ç¤ºè¿™å¼ è¡¨åªæœ‰ä¸€ä¸ªregionã€‚ å¯åŠ¨çš„æ—¶å€™ï¼Œhbaseä¼šå…ˆå»zookeeperæŸ¥æ‰¾hbase:metaè¿™å¼ è¡¨ï¼Œç„¶åæ›´æ–°è¡¨ä¿¡æ¯ã€‚å…·ä½“æ˜¯masterå¯åŠ¨AssignmentManagerï¼ŒAMåœ¨metaè¡¨é‡ŒæŸ¥æ‰¾regionä¿¡æ¯ï¼ˆå¦‚æœRegionServer(RS)å¥åœ¨ï¼Œé‚£ä¹ˆregionåˆ†é…ä½ç½®ç»§ç»­ä¿æŒï¼›å¦‚æœRSä¸åœ¨äº†ï¼ŒLoadBalancerFactoryä¼šè¢«å¯åŠ¨é‡æ–°åˆ†é…regionåˆ°æ–°çš„RSï¼‰ã€‚ç„¶åmetaè¡¨ä¼šæ›´æ–°ä¸¤ä¸ªä¿¡æ¯ï¼Œä¸€ä¸ªæ˜¯regionæ–°çš„åˆ†é…ä½ç½®ï¼Œå¦ä¸€ä¸ªæ˜¯è¿™ä¸ªRSå¼€å§‹å¤„ç†è¿™ä¸ªregionçš„æ—¶é—´ã€‚ HMasterHMasterè´Ÿè´£ç›‘æ§é›†ç¾¤é‡Œé¢æ‰€æœ‰çš„RSå®ä¾‹å’Œæ›´æ–°metaè¡¨ã€‚é€šå¸¸è¿è¡Œåœ¨NameNodeèŠ‚ç‚¹ä¸Šã€‚HMasterå‘¨æœŸæ€§è¿è¡Œä»¥ä¸‹ä¸¤ç§çº¿ç¨‹ï¼š LoadBalancerï¼šç”¨æ¥å¹³è¡¡é›†ç¾¤å†…çš„Region CatalogJanitorï¼šæ£€æŸ¥å’Œæ¸…ç†metaè¡¨ RegionServerRSè´Ÿè´£ç®¡ç†Regionsã€‚é€šå¸¸è¿è¡Œåœ¨DataNodeèŠ‚ç‚¹ä¸Šã€‚RSä¸»è¦è¿è¡Œä»¥ä¸‹å‡ ç§çº¿ç¨‹ï¼š CompactSplitThreadï¼šæ£€æŸ¥splitå’Œç®¡ç†compactions MajorCompactionCheckerï¼šæ£€æŸ¥ä¸»è¦çš„compactions MemStoreFlusherï¼šå‘¨æœŸæ€§å°†MemStoreå†™å…¥StoreFiles LogRollerï¼šå‘¨æœŸæ€§æ£€æŸ¥RSçš„write ahead log Regionåˆ†è£‚è¿‡ç¨‹RSè´Ÿè´£å®¢æˆ·ç«¯çš„å†™æ“ä½œï¼Œå°†æ•°æ®å…ˆå†™è¿›å†…å­˜çš„ä¸€ä¸ªå¯¹è±¡memstoreã€‚ä¸€æ—¦memstoreæ»¡äº†ï¼Œéšå³å°±ä¼šå°†å†…å®¹å†™åˆ°ç£ç›˜çš„storefilesï¼Œè¿™ä¸ªè¿‡ç¨‹å«memstore flushã€‚ä¸€æ—¦storefileså¤šèµ·æ¥äº†ï¼ŒRSä¾¿ä¼šå°†å®ƒä»¬åˆå¹¶åˆ°ä¸€èµ·å½¢æˆæ›´å¤§çš„storefilesï¼Œè¿™ä¸ªè¿‡ç¨‹å«compactã€‚è¿™ä¸ªè¿‡ç¨‹ä¸æ–­é‡å¤ï¼Œregionä¼šè¶Šæ¥è¶Šå¤§ã€‚è¿™æ—¶å€™ï¼ŒRSå°±ä¼šæ ¹æ®ç­–ç•¥åˆ¤æ–­æ˜¯å¦éœ€è¦å°†regionåˆ†è£‚(split)ã€‚æˆ‘ä»¬æ¥çœ‹ä¸‹å›¾ï¼š è¯¦ç»†è¿‡ç¨‹ï¼š RSä¸€æ—¦å†³å®šè¦å°†regionè¿›è¡Œåˆ†è£‚ï¼Œé‚£ä¹ˆåˆ†è£‚è¿‡ç¨‹å°±å¼€å§‹äº†ã€‚RSä¼šç”³è¯·ä¸€ä¸ªå…±äº«è¯»é”æ¥é˜²æ­¢è¡¨çš„ä¿®æ”¹ï¼Œç„¶ååœ¨zkçš„/hbase/region-in-transition/region-nameç›®å½•ä¸‹é¢åˆ›å»ºä¸€ä¸ªznodeï¼ŒçŠ¶æ€æ˜¯SPLITTING HMasteré€šè¿‡ç›‘æ§znode(region-in-transition)ç«‹é©¬å°±çŸ¥é“è¿™ä¸ªè¿‡ç¨‹å¼€å§‹äº† RSåœ¨HDFSé‡Œé¢çš„regionç›®å½•ä¸‹æ–°å»ºä¸€ä¸ª.splitså­ç›®å½• RSé€šè¿‡æ›´æ”¹æœ¬åœ°çš„æ•°æ®å±‚æ¬¡å°†è¿™ä¸ªå³å°†è¢«åˆ†è£‚çš„regionæ ‡è®°ä¸ºofflineã€‚è¿™æ˜¯å¦‚æœæœ‰å®¢æˆ·ç«¯å¯¹è¿™ä¸ªregionè¿›è¡Œè¯·æ±‚å°†ä¼šæ”¶åˆ°NotServingRegionExceptionï¼Œå®¢æˆ·ç«¯å°†ä¼šå°è¯•å…¶ä»–region RSåœ¨.splitè¿™ä¸ªç›®å½•é‡Œé¢åˆ›å»ºä¸¤ä¸ªå­ç›®å½•åˆ†åˆ«ç»™daughter region A&amp;Bï¼ŒåŒæ—¶åˆ›å»ºå¿…è¦çš„æ•°æ®ç»“æ„ï¼Œç„¶åå¼€å§‹åˆ†è£‚é‚£äº›storefilesã€‚æ€»çš„æ¥è¯´ï¼Œè¿™æ—¶å€™æ¯ä¸ªstorefileéƒ½ä¼šæœ‰ä¸¤ä¸ªreference fileè¢«åˆ›å»ºï¼Œè¿™äº›refernce fileåˆ†åˆ«æ ¹æ®åˆ†è£‚çš„ä½ç½®ï¼ˆsplit key ponitï¼‰æŒ‡å‘çˆ¶regionçš„ä¸åŒä½ç½® RSåœ¨HDFSç›®å½•é‡Œé¢åˆ›å»ºæ–°çš„regionç›®å½•å¹¶å°†reference filesç§»åŠ¨åˆ°æ¯ä¸€ä¸ªæ–°çš„regionç›®å½•ä¸‹ RSè¯·æ±‚æ›´æ”¹metaè¡¨ï¼Œä¿¡æ¯å…·ä½“å¦‚å›¾ã€‚ RSå¹¶è¡Œåœ°å¯ç”¨daughter A&amp;B RSå°†æ–°çš„ABregionåŠ åˆ°metaè¡¨å¹¶è®¾ç½®çŠ¶æ€ä¸ºonline RSæ›´æ–°znode(/hbase/region-in-transition/region-name)çŠ¶æ€ä¸ºSPLITã€‚ç„¶åmasterä¾¿å¯ä»¥é€šè¿‡zkçŸ¥é“è¿™ä¸ªåˆ†è£‚è¿‡ç¨‹å·²ç»å®Œæˆ è¿™æ—¶å€™referencesä¾ç„¶å­˜åœ¨ï¼Œä½†æ˜¯å½“æœ‰æ–°æ•°æ®å†™å…¥è§¦å‘compactè¿‡ç¨‹çš„æ—¶å€™ï¼Œè¿™äº›referenceså°†ä¼šè¢«ç§»é™¤ã€‚Masterçš„åƒåœ¾å›æ”¶æœºåˆ¶ä¼šå‘¨æœŸæ€§å»æ£€æŸ¥è¿™äº›æ–°çš„regionæ˜¯å¦ä»ç„¶æœ‰æŒ‡å‘çˆ¶region(reference files)ï¼Œå¦‚æœæ²¡æœ‰ï¼Œçˆ¶regionå°†ä¼šè¢«ç§»é™¤ã€‚ ä»¥ä¸Šæ‰€æè¿°çš„æ˜¯å¤§è‡´çš„è¿‡ç¨‹ï¼Œå…·ä½“è¯¦ç»†çš„å®ç°å»ºè®®ç›´æ¥é˜…è¯»hbaseçš„æºç ã€‚ å‚è€ƒhttp://archive.cloudera.com/cdh5/cdh/5/hbase/book.html#_architecture]]></content>
      <categories>
        <category>å¤§æ•°æ®</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[Hiveæ¶æ„]]></title>
    <url>%2F2017%2F12%2F28%2FHive-architecture%2F</url>
    <content type="text"><![CDATA[ä¸‹å›¾å±•ç¤ºäº†Hiveçš„ç»„æˆä»¥åŠHiveå’ŒHadoopçš„äº¤äº’ã€‚ Hiveç»„ä»¶UIï¼š ç”¨æˆ·æäº¤æŸ¥è¯¢è¯­å¥ä»¥åŠå…¶å®ƒç®¡ç†æ“ä½œçš„å…¥å£(command line) Driverï¼š æ¥æ”¶ç”¨æˆ·æäº¤çš„æŸ¥è¯¢è¯­å¥ï¼Œä¸Compileråˆ›å»ºä¼šè¯è¿æ¥ã€‚ Compilerï¼š å¯¹æŸ¥è¯¢è¯­å¥è¿›è¡Œè¯­ä¹‰åˆ†æå¹¶ç”Ÿæˆæ‰§è¡Œè®¡åˆ’ Metastore: å…ƒæ•°æ®åº“ï¼Œå­˜å‚¨è¡¨çš„ç»“æ„ä¿¡æ¯ï¼Œåˆ†åŒºä¿¡æ¯ä»¥åŠä¸HDFSæ–‡ä»¶çš„å…³è”ä¿¡æ¯ã€‚ Execution engine: æ‰§è¡ŒCompilerç”Ÿæˆçš„æ‰§è¡Œè®¡åˆ’ï¼ˆç®¡ç†ä¸åŒæ‰§è¡Œé˜¶æ®µçš„æ‰§è¡Œä¾èµ–ä»¥åŠåœ¨åˆé€‚çš„ç³»ç»Ÿç»„ä»¶ä¸Šæ‰§è¡Œè¿™äº›é˜¶æ®µä»»åŠ¡ï¼‰ Hive æŸ¥è¯¢è¯­å¥çš„æ‰§è¡Œè¿‡ç¨‹çœ‹å›¾è¯´è¯ã€‚UIå°†æŸ¥è¯¢è¯­å¥ä¼ ç»™Driverï¼ŒDriverä¸ºæŸ¥è¯¢è¯­å¥åˆ›å»ºä¸€ä¸ªsessionå¹¶å°†è¯­å¥ä¼ ç»™Compilerï¼ŒCompilerå»å…ƒæ•°æ®åº“è·å–å…ƒæ•°æ®ç”¨æ¥åˆ†è§£æŸ¥è¯¢è¯­å¥å¹¶ç”Ÿæˆè¿™äº›è¯­å¥çš„æ‰§è¡Œè®¡åˆ’è¿”å›ç»™Driverï¼ŒDriverå«Execution engineæ‰§è¡ŒCompilerç”Ÿæˆçš„ä»»åŠ¡ï¼ŒExecution engineè°ƒç”¨Hadoopçš„å„ä¸ªç»„ä»¶æ‰§è¡Œç›¸åº”çš„ä»»åŠ¡ï¼Œç„¶åè·å–è¿”å›ç»“æœã€‚ Hiveæ•°æ®æ¨¡å‹Hiveé‡Œé¢ä¸»è¦æœ‰ä¸‰ç§æ•°æ®ç»“æ„ï¼š Tablesè¿™å’Œå…³ç³»å‹æ•°æ®åº“çš„è¡¨ç±»ä¼¼ã€‚è¡¨æ•°æ®å­˜å‚¨äºHDFSçš„ä¸€ä¸ªç›®å½•ã€‚Hvieæ”¯æŒå¤–éƒ¨è¡¨çš„åˆ›å»ºï¼Œå°†HDFSç›®å½•é‡Œçš„æ•°æ®ä½ç½®å†™åˆ°DDLè¯­å¥é‡Œé¢å³å¯ã€‚ Partitionsæ¯å¼ è¡¨éƒ½å¯ä»¥æ ¹æ®ä¸€ä¸ªåˆ—æ¥è¿›è¡Œåˆ†åŒºï¼Œè¡¨æ•°æ®ä¼šæ ¹æ®åˆ†åŒºæ¥è¿›è¡Œåˆ†ç›®å½•å­˜å‚¨ï¼Œæé«˜æŸ¥è¯¢æ•ˆç‡ã€‚ Bucketsæ¯ä¸ªåˆ†åŒºçš„æ•°æ®éƒ½æ ¹æ®åˆ—çš„å“ˆå¸Œå€¼æ¥åˆ†æˆå‡ ä¸ªBucketsï¼Œç”¨ä»¥æé«˜æŸ¥è¯¢æ•ˆç‡ã€‚ é™¤äº†åŸå§‹çš„åˆ—ç±»å‹(integers, floating point numbers, generic strings, dates and booleans)ä¹‹å¤–ï¼ŒhiveåŒæ ·æ”¯æŒarrayå’Œmapsï¼Œè¿˜æ”¯æŒç”¨æˆ·è‡ªå®šä¹‰ç±»å‹ã€‚è¿™ä»¤åˆ°hiveå­˜å‚¨çš„æ•°æ®ç±»å‹çš„èŒƒå›´æ›´å®½å¹¿ã€‚ å…ƒæ•°æ®å¯¹è±¡ Databaseï¼šè¡¨çš„å‘½åç©ºé—´ã€‚å…¶å®å°±æ˜¯ç”¨æ¥ç»„ç»‡ä¸åŒçš„è¡¨ã€‚ Tableï¼šè¡¨çš„å…ƒæ•°æ®åŒ…å«åˆ—ä¿¡æ¯ï¼Œè¡¨çš„æ‹¥æœ‰è€…ï¼Œå­˜å‚¨ä¿¡æ¯ä»¥åŠåºåˆ—åŒ–ä¿¡æ¯ã€‚ Partitionï¼šæ¯ä¸€ä¸ªåˆ†åŒºéƒ½æœ‰å®ƒçš„åˆ—ï¼Œå­˜å‚¨å’Œåºåˆ—åŒ–ä¿¡æ¯ã€‚ å…ƒæ•°æ®åº“æ¶æ„ å†…åµŒï¼šä½¿ç”¨Derbyä½œä¸ºmetastoreï¼Œclientç›´æ¥è¿æ¥å³å¯ã€‚ è¿œç¨‹ï¼šæ¨èä½¿ç”¨mysqlï¼Œè¿™æ—¶å€™metasoreæ˜¯ä¸€ä¸ªThriftçš„æœåŠ¡ã€‚mysqlå¯ä»¥åšä¸»ä»æ¶æ„ã€‚ å‚è€ƒhttps://cwiki.apache.org/confluence/display/Hive/Home]]></content>
      <categories>
        <category>å¤§æ•°æ®</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[HDFSå’ŒYARNçš„æ¶æ„]]></title>
    <url>%2F2017%2F12%2F25%2FHDFS%E5%92%8CYARN%E7%9A%84%E6%9E%B6%E6%9E%84%2F</url>
    <content type="text"><![CDATA[å‰è¨€&emsp;&emsp;åœ¨ä¼ä¸šé‡Œé¢ï¼Œæˆ‘ä»¬æ­å»ºä¸€ä¸ªæœåŠ¡ä¸€èˆ¬éƒ½ä¼šè€ƒè™‘å‡ ä¸ªé—®é¢˜ã€‚é¦–å…ˆæ˜¯ç”¨é€”ï¼Œæ¯”æ–¹è¯´ä¸€èˆ¬éƒ½æœ‰å¼€å‘ç¯å¢ƒï¼Œæµ‹è¯•ç¯å¢ƒä»¥åŠç”Ÿäº§ç¯å¢ƒï¼ˆæ¯”è¾ƒé‡è¦çš„æœåŠ¡ä¸€èˆ¬è¿˜ä¼šæœ‰ç°åº¦ç¯å¢ƒï¼‰ã€‚è¿™ä¸ªç”¨é€”ä¸€æ—¦å†³å®šäº†ï¼Œæˆ‘ä»¬å°±å¯ä»¥è€ƒè™‘æ¥ä¸‹æ¥çš„é—®é¢˜äº†ã€‚ç¬¬äºŒæ˜¯æ¶æ„ï¼Œç¬¬ä¸‰å°±æ˜¯æˆæœ¬äº†ã€‚æ¶æ„ä¼šç›´æ¥å†³å®šæ‰€éœ€è¦èŠ±è´¹çš„æœºå™¨æˆæœ¬å’Œç»´æŠ¤æˆæœ¬ã€‚å¥½å§ï¼Œå¥½åƒæœ‰ç‚¹æ‰¯è¿œäº†ã€‚ã€‚ã€‚å›åˆ°æ­£é¢˜ã€‚è¿™é‡Œæˆ‘æƒ³è¦è¯´æ˜çš„äº‹æƒ…æ˜¯æˆ‘å½“ä¸Šå¤§æ•°æ®è¿ç»´ä¹‹åï¼Œé‡åˆ°çš„å‘å…¶å®éƒ½å¯ä»¥å½’æ ¹æº¯æºåˆ°æ¶æ„æˆ–è€…åŸç†çš„ç†è§£ä¸Šé¢ã€‚æ‰€ä»¥æˆ‘ç‰¹åˆ«æƒ³è®°å½•ä¸€ä¸‹hdfså’Œyarnçš„æ¶æ„ï¼Œé‡åˆ°å‘çš„æ—¶å€™å›æƒ³ä¸€ä¸‹æˆ–è®¸å¯ä»¥ä»è¿™é‡Œæ‰¾åˆ°è§£å†³é—®é¢˜çš„æ€è·¯ã€‚ HDFShdfsåŒ…å«ä¸¤ç§è§’è‰²ï¼ŒNamenodeå’ŒDatanodeã€‚ä¸‹é¢æ˜¯ä¸€å¼ å®˜æ–¹æ¶æ„å›¾ã€‚&emsp;&emsp;hdfsæ˜¯å…¸å‹çš„ä¸»ä»æ¶æ„ã€‚åœ¨hdfsçš„å†…éƒ¨ï¼Œæ–‡ä»¶æ˜¯ä¼šè¢«åˆ’åˆ†æˆå¤šä¸ªå—ï¼Œå—è¢«å­˜å‚¨åœ¨ä¸€ç»„slaveé‡Œé¢ï¼ˆå°±æ˜¯å›¾é‡Œçš„ç»¿è‰²å°æ–¹æ ¼ï¼‰ã€‚&emsp;&emsp;masterè´Ÿè´£ç®¡ç†æ–‡ä»¶ç³»ç»Ÿçš„å‘½åç©ºé—´ï¼ˆæ¯”å¦‚æ‰“å¼€æ–‡ä»¶ï¼Œå…³é—­æ–‡ä»¶ä»¥åŠé‡å‘½åæ–‡ä»¶å’Œæ–‡ä»¶å¤¹ï¼‰,å®¢æˆ·ç«¯å¯¹æ–‡ä»¶ç³»ç»Ÿçš„è®¿é—®æƒé™ä»¥åŠå—å’Œslaveçš„æ˜ å°„å…³ç³»ã€‚&emsp;&emsp;slaveè´Ÿè´£å­˜å‚¨æ–‡ä»¶ï¼Œå¤„ç†å®¢æˆ·ç«¯çš„è¯»å†™è¯·æ±‚å¹¶ä¸”æ ¹æ®masterçš„æŒ‡ä»¤å¯¹å—è¿›è¡Œåˆ›å»ºï¼Œåˆ é™¤ä»¥åŠå¤åˆ¶ã€‚ ä¸‹é¢åˆ†å‡ ä¸ªæ–¹é¢æè¿°ä¸€ä¸ªhdfsè¿™ä¸ªåˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿã€‚ å‘½åç©ºé—´ åƒå¤§å¤šæ•°æ–‡ä»¶ç³»ç»Ÿä¸€æ ·ï¼Œç”¨æˆ·å¯ä»¥å¯¹æ–‡ä»¶ï¼ˆå¤¹ï¼‰è¿›è¡Œå¢åˆ æ”¹æŸ¥ã€‚NNè´Ÿè´£ç»´æŠ¤è¿™äº›å¯¹å‘½åç©ºé—´è¿›è¡Œæ“ä½œçš„å…ƒæ•°æ®ä¿¡æ¯ã€‚ æ•°æ®å¤åˆ¶ åœ¨HDFSçš„å†…éƒ¨ï¼Œæ–‡ä»¶ä¼šè¢«åˆ†æˆå¤§å°ç›¸åŒçš„å¤šä¸ªå—è¿›è¡Œå­˜å‚¨ï¼ŒåŒæ—¶ï¼Œä¸ºäº†å®ç°å®¹é”™ï¼Œè¿™äº›å—ä¼šè¢«å¤åˆ¶å¤šä»½å¹¶æ•£è½åœ¨ä¸åŒçš„DNä¸Šè¿›è¡Œå­˜å‚¨ã€‚è¿™ä¸ªå—å¤§å°å’Œå¤åˆ¶ä»½æ•°æ˜¯å¯ä»¥ç”±ç”¨æˆ·å®šä¹‰çš„ã€‚ä¸Šé¢æåˆ°DNæ˜¯å­˜å‚¨è¿™äº›å—çš„ï¼ŒNNæ˜¯è´Ÿè´£ç®¡ç†å—å’ŒDNçš„æ˜ å°„å…³ç³»ï¼Œé‚£ä¹ˆï¼Œè¿™é‡Œæˆ‘ä»¬æœ‰ä¸¤ä¸ªä¸œè¥¿ï¼Œä¸€ä¸ªæ˜¯å¿ƒè·³ï¼Œå¦ä¸€ä¸ªæ˜¯å—æŠ¥å‘Šã€‚DNå‘¨æœŸæ€§å‘NNå‘é€å¿ƒè·³ä¿¡æ¯å’Œå—æŠ¥å‘Šã€‚å¿ƒè·³æ˜¯å‘Šè¯‰NNå®ƒè¿˜æ´»ç€ï¼Œå—æŠ¥å‘Šæ˜¯å‘Šè¯‰NNå®ƒæœ‰å“ªäº›å—ã€‚è¯¦ç»†å¦‚å›¾æ‰€ç¤ºã€‚ é‚£ä¹ˆï¼Œå—æ˜¯æ€ä¹ˆå­˜å‚¨ä¼šæ¯”è¾ƒæ–¹ä¾¿å‘¢ï¼Ÿè¿™é‡Œé¢æˆ‘ä»¬è€ƒè™‘ä¸¤ä¸ªä¸œè¥¿ã€‚ä¸€ä¸ªæ˜¯é«˜å¯ç”¨ï¼Œå¦ä¸€ä¸ªæ˜¯è¯»å†™æ€§èƒ½ã€‚ä¸Šé¢æåˆ°äº†ï¼Œä¸ºäº†ä¿è¯æ•°æ®å®‰å…¨å¯é ï¼Œhdfsä¼šå°†æ•°æ®åˆ†å‰²æˆå¤šä¸ªå¤§å°ç›¸åŒçš„å—å¹¶ä¸”å¯¹å—è¿›è¡Œå¤åˆ¶ä¹‹ååˆ†æ•£å­˜å‚¨ã€‚è™½ç„¶è¿™ä¸ªåšæ³•æ»¡è¶³äº†æ•°æ®å®‰å…¨å¯é çš„è¦æ±‚ï¼Œä½†æ˜¯æ­¤æ—¶æˆ‘ä»¬é‡åˆ°äº†å¦ä¸€ä¸ªé—®é¢˜ï¼Œè¯»å†™æ•ˆç‡ã€‚å¦‚æœæˆ‘ä»¬å°†å—å­˜å‚¨åœ¨ä¸åŒæœºæ¶ï¼Œå¸¦å®½ä¼šæˆä¸ºæ•ˆç‡çš„ç“¶é¢ˆã€‚ä½†æ˜¯éƒ½å­˜åœ¨ä¸€ä¸ªæœºæ¶ï¼Œé‚£ä¹ˆå®‰å…¨å¯é æ€§å°±å¤§å¤§é™ä½äº†ã€‚é€šå¸¸çš„åšæ³•æ˜¯å°†å¤åˆ¶å› å­è®¾ç½®ä¸º3ï¼Œç„¶åæŒ‰ç…§ä»¥ä¸‹ç­–ç•¥æ”¾ç½®å‰¯æœ¬ã€‚ å‰¯æœ¬No.1ï¼šå¦‚æœå®¢æˆ·ç«¯æ­£åœ¨è¿™ä¸ªDNä¸Šé¢å†™ï¼Œé‚£ä¹ˆå°±æ”¾åœ¨è¿™ä¸ªDNï¼›å¦åˆ™ï¼Œåœ¨è¿™ä¸ªæœºæ¶ä»»æ„é€‰å–ä¸€ä¸ªDN å‰¯æœ¬No.2ï¼šæ”¾åœ¨å’Œç¬¬ä¸€ä»½å‰¯æœ¬ä¸åŒçš„æœºæ¶ä¸Šé¢çš„æŸä¸ªèŠ‚ç‚¹ å‰¯æœ¬No.3ï¼šæ”¾åœ¨ç¬¬äºŒä»½å‰¯æœ¬é‚£ä¸ªæœºæ¶ä¸Šçš„ä¸åŒèŠ‚ç‚¹ä¸Šé¢ æ€»çš„æ¥è¯´ï¼Œå°±æ˜¯ä¸€ä¸ªå‰¯æœ¬åœ¨ä¸€ä¸ªèŠ‚ç‚¹ï¼Œå¦ä¸€ä¸ªå‰¯æœ¬åœ¨å¦ä¸€ä¸ªæœºæ¶çš„ä¸€ä¸ªèŠ‚ç‚¹ä¸Šï¼Œæœ€åä¸€ä¸ªå‰¯æœ¬å‡åŒ€åˆ†å¸ƒåœ¨ç¬¬äºŒä¸ªå‰¯æœ¬é‚£ä¸ªæœºæ¶çš„ä¸åŒèŠ‚ç‚¹ä¸Šã€‚ä½¿ç”¨è¿™ä¸ªç­–ç•¥æˆ‘ä»¬æé«˜äº†è¯»å†™æ•ˆç‡ï¼ˆé™ä½æœºæ¶ä¹‹é—´ä¼ è¾“çš„æ‰€éœ€å¸¦å®½ï¼‰å’Œä¸å½±å“æ•°æ®çš„å®‰å…¨å¯é ã€‚åŒæ—¶ï¼ŒHDFSæœ‰ä¸€ä¸ªå°±è¿‘è¯»çš„ç­–ç•¥ï¼Œé»˜è®¤æ˜¯ä¼šé€‰å–ç¦»æ¥æ”¶è¯»è¯·æ±‚é‚£ä¸ªDNæœ€è¿‘çš„å—ä»¥é™ä½å¸¦å®½çš„å¼€é”€ã€‚è¿™æ˜¯æ‰€è°“çš„å—é€‰æ‹©ã€‚åŒæ—¶ï¼Œè¿™é‡Œæœ‰ä¸€ä¸ªå®‰å…¨æ¨¡å¼ï¼Œå½“NNå‘ç°å®ƒå®‰å…¨çš„æ—¶å€™ï¼Œå®ƒæ‰ä¼šç»§ç»­æ¥å—è¯·æ±‚ã€‚é‚£æ€ä¹ˆåˆ¤æ–­å®‰å…¨å‘¢ï¼Ÿé‚£å°±æ˜¯å‰¯æœ¬æ•°è¾¾åˆ°ä¸€ä¸ªå¯æ‰¿å—çš„æœ€å°å€¼ã€‚ å…ƒæ•°æ®æŒä¹…åŒ– è¿™é‡Œæˆ‘ä»¬è¯´ä¸¤ä¸ªæ–‡ä»¶ï¼Œä¸€ä¸ªæ˜¯EditlLogï¼Œå¦ä¸€ä¸ªæ˜¯FsImageã€‚ EditLogï¼šè®°å½•æ–‡ä»¶ç³»ç»Ÿå…ƒæ•°æ®çš„å˜åŒ–ã€‚æ¯”å¦‚æ–°å¢ä¸€ä¸ªæ–‡ä»¶ä¹‹ç±»ã€‚ä¿®æ”¹å¤åˆ¶å› å­çš„æ“ä½œè¿™é‡Œä¹Ÿä¼šè®°å½• FsImageï¼šä¿å­˜æ•´ä¸ªæ–‡ä»¶ç³»ç»Ÿçš„å‘½åç©ºé—´ï¼ŒåŒ…æ‹¬æ–‡ä»¶çš„å—æ˜ å°„ä»¥åŠæ–‡ä»¶ç³»ç»Ÿçš„ä¸€äº›å±æ€§ å…¶å®EditLogæ˜¯è®°å½•æ“ä½œçš„ï¼ŒFsImageæ˜¯ä¿å­˜è¢«æ“ä½œçš„æ–‡ä»¶ç³»ç»Ÿçš„ã€‚é‚£ä¹ˆè¿™é‡Œæˆ‘ä»¬æœ‰ä¸€ä¸ªå«checkpointçš„ä¸œè¥¿ï¼Œå®ƒçš„å·¥ä½œåŸç†æ˜¯å½“NNå¯åŠ¨çš„æ—¶å€™ï¼Œä¼šä»ç£ç›˜è¯»å–EditLogå’ŒFsImageè¿™ä¸¤ä¸ªæ–‡ä»¶ï¼Œå¹¶å°†EditLogé‡Œé¢è®°å½•çš„æ“ä½œåº”ç”¨åˆ°FsImageç„¶åç”Ÿæˆä¸€ä¸ªæ–°ç‰ˆæœ¬çš„FsImageï¼Œç„¶åä¼šåˆ æ‰è¿™ä¸ªEditLogã€‚è¿™ä¸ªè¿‡ç¨‹å°±æ˜¯checkpointäº†ã€‚ é²æ£’æ€§ ç£ç›˜æ•…éšœï¼Œå¿ƒè·³ä¿¡æ¯ä¸é‡å¤åˆ¶æ¯ä¸ªDNéƒ½ä¼šå®šæœŸå‘é€å¿ƒè·³ä¿¡æ¯åˆ°NNè¡¨ç¤ºè‡ªå·±è¿˜æ´»ç€ã€‚å‡è®¾å‡ºç°ç½‘ç»œé—®é¢˜ï¼ŒNNä¼šæ ‡è®°æ­¤DNå·²ç»å¤±è”ï¼Œè¿™æ—¶å€™ä¾¿ä¸å†è½¬å‘ä»»ä½•çš„IOè¯·æ±‚ç»™å®ƒï¼ŒåŒæ—¶NNä¼šè§¦å‘re-replicationã€‚å…¶å®ï¼Œç£ç›˜åªè¯»ï¼ŒDNå¤±è”æˆ–è€…blockæŸåéƒ½æ˜¯ä¼šä»¤NNè§¦å‘re-replicationçš„ã€‚ æ•°æ®æ£€éªŒNNä¼šå¯¹æ–°å†™å…¥çš„æ–‡ä»¶åšä¸€ä¸ªæ ¡éªŒå’Œç„¶åå­˜åœ¨ä¸€ä¸ªéšè—æ–‡ä»¶é‡Œé¢ï¼Œå½“å®¢æˆ·ç«¯è¦è¯»è¿™ä¸ªæ–‡ä»¶ï¼ŒNNä¼šå°†ä»å„ä¸ªDNè¯»å›æ¥çš„blockçš„æ£€éªŒå€¼å’Œéšè—æ–‡ä»¶é‡Œé¢çš„è¿›è¡Œå¯¹æ¯”ã€‚å¦‚æœå¯¹ï¼Œé‚£ä¹ˆè¯»å‡ºæ¥ï¼Œé”™è¯¯ï¼Œå°±ç»§ç»­å¯»æ‰¾å…¶ä»–æ— æŸçš„blockã€‚ snapshotå…¶å®å°±æ˜¯ç”¨æ¥å›æ»šåˆ°ä½ åšè¿™ä¸ªå¿«ç…§çš„æ—¶å€™çš„çŠ¶æ€ã€‚ æ•°æ®å†™è¿‡ç¨‹ æ•°æ®å—HDFSå¤©ç”Ÿå°±æ˜¯ç”¨æ¥å¤„ç†å¤§æ–‡ä»¶çš„ã€‚é»˜è®¤çš„å—å¤§å°æ˜¯64mbï¼Œå¯ä»¥åœ¨é…ç½®æ–‡ä»¶è°ƒèŠ‚ã€‚ å†™è¿‡ç¨‹å†™å…¥æ•°æ®çš„æ—¶å€™å®¢æˆ·ç«¯ä¼šç°å°†å†…å®¹å†™åˆ°ä¸€ä¸ªä¸´æ—¶æ–‡ä»¶é‡Œï¼Œå½“ä¸´æ—¶æ–‡ä»¶è¶…è¿‡å—å¤§å°ä¹‹åï¼Œå®¢æˆ·ç«¯ä¼šé€šçŸ¥NNã€‚NNä¼šä¿®æ”¹æ–‡ä»¶ç³»ç»Ÿå±‚çº§å¹¶ä¸ºå…¶åˆ†é…ä¸€ä¸ªæ•°æ®å—ï¼ŒNNå“åº”å®¢æˆ·ç«¯çš„è¯·æ±‚ï¼Œå‘Šè¯‰å®¢æˆ·ç«¯æ”¾åˆ°å“ªä¸ªDNçš„å“ªä¸ªæ•°æ®å—é‡Œé¢å»ã€‚ç„¶åå®¢æˆ·ç«¯å°†ä¸´æ—¶æ–‡ä»¶çš„å†…å®¹å†™åˆ°NNæŒ‡å®šçš„DNã€‚å½“ä¸€ä¸ªæ–‡ä»¶å†™å®Œäº†ï¼Œå‰©ä¸‹çš„ä¸´æ—¶æ–‡ä»¶ä¼šç›´æ¥è¢«å‘é€åˆ°DNï¼Œç„¶åå®¢æˆ·ç«¯å‘Šè¯‰NNæå®šäº†ã€‚NNç¡®è®¤ä¹‹åå°†æ–‡ä»¶çŠ¶æ€ä»åˆ›å»ºå˜ä¸ºæ°¸ä¹…å­˜å‚¨ã€‚ï¼ˆå¦‚æœæ–‡ä»¶åˆ›å»ºè¿‡ç¨‹ä¸­NNæ•…éšœäº†ï¼Œé‚£ä¹ˆæ–‡ä»¶å°±ä¸¢å¤±äº†ã€‚ï¼‰ å¤åˆ¶æ˜¯ç®¡é“å¼çš„æ­£å¦‚ä¸Šé¢æ‰€è¯´ï¼Œå†™çš„è¿‡ç¨‹é‡Œé¢å®¢æˆ·ç«¯ä¼šè·å–ä¸€ä¸ªå¯å†™çš„DNåˆ—è¡¨ã€‚è¿™æ—¶å€™ï¼ˆå‡è®¾å¤åˆ¶å› å­æ˜¯3ï¼‰ï¼Œå®¢æˆ·ç«¯å°†æ•°æ®å†™åˆ°ç¬¬ä¸€ä¸ªDNã€‚ç¬¬ä¸€ä¸ªDNæ¥æ”¶æ•°æ®å¹¶å†™åˆ°æœ¬åœ°ï¼Œç„¶åå°†æ•°æ®ä¼ è¾“åˆ°åˆ—è¡¨é‡Œé¢çš„ç¬¬äºŒä¸ªDNï¼Œç¬¬äºŒä¸ªDNå’Œç¬¬ä¸‰ä¸ªDNåŒç†ã€‚ ç©ºé—´å›æ”¶ æ–‡ä»¶åˆ é™¤ä¸æ¢å¤æ–‡ä»¶è¢«åˆ ä¹‹åå¹¶ä¸æ˜¯é©¬ä¸Šç§»é™¤ï¼Œè€Œæ˜¯è¢«ç§»åŠ¨åˆ°trashç›®å½•ï¼Œè¿™æ—¶å€™æ˜¯å¯ä»¥è¢«æ¢å¤çš„ã€‚ç”¨æˆ·å¯ä»¥è®¾ç½®ä¸€ä¸ªè¿‡æœŸæ—¶é—´ï¼Œæ—¶é—´ä¸€è¿‡ï¼Œæ–‡ä»¶å°±ä¼šè¢«NNç§»é™¤äº†ã€‚æ–‡ä»¶ç§»é™¤ä¸ç©ºé—´é‡Šæ”¾ä¹‹é—´ä¼šæœ‰ä¸€ä¸ªå»¶æ—¶ã€‚ YARN&emsp;&emsp;yarnæœ‰å‡ ä¸ªè§’è‰²ï¼Œéƒ½æ¯”è¾ƒé‡è¦ã€‚æˆ‘ä»¬å…ˆçœ‹å›¾ç„¶åå†æ€»ç»“ä¸€ä¸‹è§’è‰²çš„ä½œç”¨ã€‚ ResourceManagerRMä¸»è¦æœ‰ä¸¤ä¸ªç»„ä»¶ï¼Œä¸€ä¸ªæ˜¯schedulerï¼Œå¦ä¸€ä¸ªæ˜¯ApplicationManagerã€‚ schedulerè¿™ä¸ªè°ƒåº¦å™¨ä¸»è¦ä½œç”¨æ˜¯åˆ†é…èµ„æºç»™ä»»åŠ¡ï¼Œæ¯”å¦‚CPUï¼Œmemoryç­‰ç­‰ã€‚æœ€æµè¡Œçš„æœ‰ä¸¤ç§è°ƒåº¦ç­–ç•¥ï¼Œåˆ†åˆ«æ˜¯CapacityScheduler å’Œ FairSchedulerã€‚ ApplicationManagerè¿™ä¸ªåº”ç”¨ç®¡å®¶ä¸»è¦è´Ÿè´£æ¥å—ä»»åŠ¡æäº¤ï¼Œä¸ºä»»åŠ¡å¯åŠ¨ApplicationMasterä»¥åŠè´Ÿè´£ApplicationMasterå¤±è´¥åçš„é‡å¯ã€‚ NodeManagerå¦‚å…¶åï¼Œè¿™ä¸ªç»„ä»¶è´Ÿè´£ç›‘æ§å¹¶ä¸”å‘RMæ±‡æŠ¥èµ„æºçš„ä½¿ç”¨æƒ…å†µã€‚ ApplicationMasteræ¯ä¸ªä»»åŠ¡çš„AMè´Ÿè´£æ ¹æ®è°ƒåº¦å™¨çš„å®‰æ’åˆ†é…èµ„æºç»†èŠ‚ï¼Œè·Ÿè¸ªçŠ¶æ€å¹¶ä¸”ç›‘æ§ä»»åŠ¡è¿‡ç¨‹ã€‚ å…¶å®ï¼Œæˆ‘ä»¬å¯¹ç€ä¸Šé¢çš„è¿™ä¸ªæ¡†æ¶å›¾ç„¶åçŸ¥é“æ¯ä¸ªè§’è‰²çš„ä½œç”¨å°±å¯ä»¥æ˜ç™½YARNæ¶æ„çš„å·¥ä½œæµç¨‹äº†ã€‚ å¥½äº†ï¼Œåˆ°è¿™é‡Œçš„è¯æˆ‘å¤§è‡´å°±è®²å®Œhadoopè¿™ä¸ªä¸œä¸œé‡Œé¢çš„ä¸»è¦éƒ¨åˆ†äº†ã€‚æˆ‘å½“æ—¶æ‰€åœ¨çš„å›¢é˜Ÿä½¿ç”¨çš„æ˜¯CDHç‰ˆæœ¬çš„hadoopï¼Œå’Œç¤¾åŒºç‰ˆè¿˜æ˜¯æœ‰ä¸€ç‚¹åŒºåˆ«çš„ã€‚ä½†æ˜¯é‡Œé¢çš„åŸç†æ˜¯ä¸€æ ·çš„ã€‚ å‚è€ƒhttp://archive.cloudera.com/cdh5/cdh/5/hadoop/]]></content>
      <categories>
        <category>å¤§æ•°æ®</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[å›å¿†å½•ï¼ˆå¤§æ•°æ®ç¯‡ï¼‰]]></title>
    <url>%2F2017%2F12%2F24%2F%E5%9B%9E%E5%BF%86%E5%BD%95%EF%BC%88%E5%A4%A7%E6%95%B0%E6%8D%AE%E6%96%B9%E5%90%91%EF%BC%89%2F</url>
    <content type="text"><![CDATA[äº’è”ç½‘ç”Ÿæ¶¯å¼€å§‹äº†åˆšæ¯•ä¸šçš„æ—¶å€™æˆ‘åœ¨ä¸€å®¶å¤–åŒ…å…¬å¸ï¼Œé©»ç‚¹åœ¨å®¶ä¹¡çš„ç§»åŠ¨å…¬å¸å·¥ä½œã€‚æ¯å¤©é™¤äº†åšexcelè¡¨æ ¼å’Œå‚¬å·¥ç¨‹å•ä¹‹å¤–ï¼Œæˆ‘æ‰¾ä¸åˆ°ä¸€ç‚¹åšæŠ€æœ¯çš„æ„Ÿè§‰ã€‚ä½†æ˜¯å½“æ—¶çš„æˆ‘å¯¹å¤§æ•°æ®å¯æ˜¯æ»¡æ€€çƒ­æƒ…ï¼Œé€šè¿‡ç½‘ç»œè¯¾ç¨‹ç­‰é€”å¾„è‡ªå­¦äº†è®¸å¤šå¤§æ•°æ®çš„çŸ¥è¯†ã€‚è¿˜è®°å¾—å½“æ—¶ç»å¸¸ä¸Šdataguruè®ºå›ï¼Œå¬dataguruçš„è¯¾ç¨‹ï¼Œå¬tigerè€å¸ˆè®²æˆhadoopçš„å„ç§çŸ¥è¯†ã€‚ åˆè¯†hadoopå¯¹hadoopç”Ÿæ€åœˆå½¢æˆæ¦‚å¿µå¹¶å¼€å§‹åŠ¨æ‰‹æ“ä½œæ˜¯åœ¨å¬dataguruçš„tigerè€å¸ˆè¯¾ç¨‹çš„æ—¶å€™ã€‚é‚£æ—¶å€™å¾ˆè®¤çœŸå¬æ¯ä¸€èŠ‚è¯¾ï¼Œä»hadoopçš„åŸç†åˆ°åŠ¨æ‰‹æ­å»ºä¼ªåˆ†å¸ƒå¼é›†ç¾¤ï¼Œéƒ½è®¤è®¤çœŸçœŸä¸€æ­¥ä¸€æ­¥æŒ‰ç…§è€å¸ˆçš„è®²æ³•æ¥æ“ä½œã€‚è¿™ä¸ªè¿‡ç¨‹ä¸­ä¹Ÿç®—æ˜¯å¼€å§‹ç†Ÿæ‚‰äº†shellå‘½ä»¤ï¼Œä¸ºä¹‹åçš„è¿ç»´å·¥ä½œæ‰“ä¸‹äº†ä¸€ä¸ªåŸºç¡€å§ï¼ŒåŒæ—¶è¿˜æœ‰ä¸€ä¸ªä¸œè¥¿æˆ‘è¦æ¨èçš„ï¼Œå°±æ˜¯Packtè¿™ä¸ªå‡ºç‰ˆç¤¾ã€‚å®ƒçœŸçš„æ˜¯æŠ€æœ¯äººçš„ç¦éŸ³ï¼å®ƒå‡ºç‰ˆçš„ä¹¦ç±å¯æ“ä½œæ€§å¼ºï¼Œæ¡ç†æ¸…æ™°ï¼Œè´´è¿‘å‰æ²¿ã€‚ å¤§æ•°æ®è¿ç»´çªç„¶ç”±äºé¡¹ç›®è¢«å–æ¶ˆäº†ï¼Œæˆ‘æ¯•ä¸šåçš„ç¬¬ä¸€ä»½å·¥ä½œä¹Ÿç»“æŸäº†ã€‚å…¶å®å½“æ—¶çš„æˆ‘å¯¹äºè¢«é£æ•£å…¶å®æ˜¯æœ‰ä¸€ç‚¹ç‚¹å–œæ‚¦çš„ï¼Œå› ä¸ºæ„Ÿè§‰ç»ˆäºå¯ä»¥ç¦»å¼€è¿™ä¸ªä¸é€‚åˆæˆ‘çš„åœ°æ–¹äº†ã€‚æˆ‘è§‰å¾—å‡­å€Ÿç€æˆ‘è‡ªå­¦çš„çŸ¥è¯†ä»¥åŠå¯¹å¤§æ•°æ®çš„çƒ­æƒ…ï¼Œæˆ‘è‚¯å®šå¯ä»¥æ‰¾åˆ°ä¸€ä¸ªå¯ä»¥è®©æˆ‘å¤§å±•èº«æ‰‹çš„åœ°æ–¹ã€‚ç»ˆäºï¼Œç»è¿‡åŠªåŠ›ï¼Œæˆ‘é€šè¿‡é¢è¯•è¿›äº†aå…¬å¸ï¼Œå²—ä½æ­£æ˜¯å¤§æ•°æ®è¿ç»´ã€‚ ç¤¾åŒºç‰ˆå’Œä¼ä¸šç‰ˆåˆ°äº†aå…¬å¸ä¹‹åå‘ç°å…¶å®è‡ªå·±ä¹‹å‰å­¦åˆ°çš„ä¸œè¥¿åªæ˜¯å†°å±±ä¸€è§’ã€‚çœŸæ­£çš„ä¼ä¸šé‡Œé¢ä½¿ç”¨çš„å¤§æ•°æ®é›†ç¾¤è¦æ±‚è¦æ¯”æˆ‘å­¦åˆ°çš„é‚£äº›è¦é«˜å‡ºå¾ˆå¤šã€‚aå…¬å¸ä¹Ÿç®—æ˜¯ä¸€ä¸ªä¸­å‹äº’è”ç½‘å…¬å¸ï¼Œå¤§æ•°æ®é›†ç¾¤ä¹Ÿæœ‰è¿‡ç™¾èŠ‚ç‚¹ã€‚ä¸è¿‡ï¼Œè‡ªå­¦çš„ä¸œè¥¿ä¹Ÿç®—æ˜¯ä¸€ä¸ªåŸºç¡€ï¼Œæ­£æ˜¯æœ‰äº†è¿™ä¸ªåŸºç¡€ï¼Œæˆ‘æ‰å¯ä»¥æ›´å¥½æ›´å¿«åœ°æŠŠå…¬å¸çš„é‚£å¥—é›†ç¾¤æŒæ¡ã€‚æ¥ä¸‹æ¥æˆ‘å°†ä¼šè®²è¿°æˆ‘åœ¨è¿™æ•´ä¸ªè¿‡ç¨‹é‡Œé¢æ‰€å­¦åˆ°çš„ä¸œè¥¿ã€‚ HDFSå’ŒYARNçš„æ¶æ„ Hbaseæ¶æ„ Hiveæ¶æ„ å¥½äº†ï¼Œæ¶æ„å°±æš‚æ—¶è¯´åˆ°è¿™é‡Œï¼Œæˆ‘ä»¬çœ‹çœ‹ä¸€äº›å®‰è£…ç»éªŒã€‚ä¹‹å‰åœ¨aå…¬å¸çš„æ—¶å€™æˆ‘ä»¬å¤§æ•°æ®è¿ç»´ç»„é‡‡ç”¨äº†ä¸¤ç§éƒ¨ç½²æ–¹å¼ï¼Œç¬¬ä¸€ç§æ˜¯åˆ©ç”¨saltstackï¼Œå¦ä¸€ç§æ˜¯åˆ©ç”¨ansibleã€‚ansibleçš„æ–¹å¼æ˜¯æˆ‘å†™çš„ï¼Œæ‰€ä»¥åœ¨è¿™é‡Œæˆ‘è¯´ä¸€ä¸‹ansibleå¦‚ä½•è‡ªåŠ¨åŒ–éƒ¨ç½²CDHé›†ç¾¤ã€‚ ansibleéƒ¨ç½²CDH é™¤äº†éƒ¨ç½²ä¹‹å¤–ï¼Œæ—¥å¸¸æœ€å¤šçš„å·¥ä½œå°±æ˜¯ç»´æŠ¤é›†ç¾¤ç¨³å®šï¼Œå¹¶ä¸”å®ç°æ¥è‡ªäº§å“ï¼Œç ”å‘ç­‰çš„éœ€æ±‚ã€‚ç°åœ¨åˆ†äº«ä¸€ä¸‹æ—¥å¸¸çš„ä¸€äº›ç»´æŠ¤å°ç»éªŒã€‚ ç®¡ç†HDFSæœåŠ¡ ç®¡ç†YARNæœåŠ¡ Hbaseçš„ä¸€ç‚¹å°æ€»ç»“ Sparkçš„ä¸€ç‚¹å°æ€»ç»“]]></content>
      <categories>
        <category>ä¸ªäººæ„Ÿæ‚Ÿ</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[å…³äºHTTPçŠ¶æ€ç çš„æ€»ç»“]]></title>
    <url>%2F2017%2F12%2F23%2F%E5%85%B3%E4%BA%8EHTTP%E7%8A%B6%E6%80%81%E7%A0%81%E7%9A%84%E6%80%BB%E7%BB%93%2F</url>
    <content type="text"><![CDATA[HTTPçŠ¶æ€ç çš„å¤§è‡´åˆ†ç±» 100-199 ç”¨äºæŒ‡å®šå®¢æˆ·ç«¯ç›¸åº”çš„æŸäº›åŠ¨ä½œã€‚ 200-299 ç”¨äºè¡¨ç¤ºè¯·æ±‚æˆåŠŸã€‚ 300-399 ç”¨äºå·²ç§»åŠ¨çš„æ–‡ä»¶å¹¶å¸¸è¢«åŒ…å«åœ¨å®šä½å¤´ä¿¡æ¯ä¸­æŒ‡å®šæ–°çš„åœ°å€ä¿¡æ¯ã€‚ 400-499 ç”¨äºæŒ‡å‡ºå®¢æˆ·ç«¯çš„é”™è¯¯ã€‚ 500-599 ç”¨äºæ”¯æŒæœåŠ¡å™¨é”™è¯¯ã€‚ 100-199 100 (Continue/ç»§ç»­)å¦‚æœæœåŠ¡å™¨æ”¶åˆ°çš„headerä¸­å¸¦æœ‰100-continueçš„è¯·æ±‚ï¼Œè¿™æ˜¯æŒ‡å®¢æˆ·ç«¯è¯¢é—®æ˜¯å¦å¯ä»¥åœ¨åç»­çš„è¯·æ±‚ä¸­å‘é€é™„ä»¶ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼ŒæœåŠ¡å™¨ç”¨100å…è®¸å®¢æˆ·ç«¯ç»§ç»­æˆ–ç”¨417 (Expectation Failed)å‘Šè¯‰å®¢æˆ·ç«¯ä¸åŒæ„æ¥å—é™„ä»¶ã€‚ 101 (Switching Protocols/è½¬æ¢åè®®)101æ˜¯æŒ‡æœåŠ¡å™¨å°†æŒ‰ç…§å…¶ä¸Šçš„å¤´ä¿¡æ¯å˜ä¸ºä¸€ä¸ªä¸åŒçš„åè®®ã€‚ 200-299 200 (OK/æ­£å¸¸)200çš„æ„æ€æ˜¯ä¸€åˆ‡æ­£å¸¸ã€‚ä¸€èˆ¬ç”¨äºç›¸åº”GETå’ŒPOSTè¯·æ±‚ã€‚ 201 (Created/å·²åˆ›å»º)201è¡¨ç¤ºæœåŠ¡å™¨åœ¨è¯·æ±‚çš„å“åº”ä¸­å»ºç«‹äº†æ–°æ–‡æ¡£ï¼›åº”åœ¨headerä¸­ç»™å‡ºå®ƒçš„URLã€‚ 202 (Accepted/æ¥å—)202å‘Šè¯‰å®¢æˆ·ç«¯è¯·æ±‚æ­£åœ¨è¢«æ‰§è¡Œï¼Œä½†è¿˜æ²¡æœ‰å¤„ç†å®Œã€‚ 203 (Non-Authoritative Information/éå®˜æ–¹ä¿¡æ¯)203è¡¨ç¤ºæ–‡æ¡£è¢«æ­£å¸¸çš„è¿”å›ï¼Œä½†æ˜¯ç”±äºæ­£åœ¨ä½¿ç”¨çš„æ˜¯æ–‡æ¡£å‰¯æœ¬æ‰€ä»¥æŸäº›å“åº”å¤´ä¿¡æ¯å¯èƒ½ä¸æ­£ç¡®ã€‚ 204 (No Content/æ— å†…å®¹)204è¡¨ç¤ºåœ¨å¹¶æ²¡æœ‰æ–°æ–‡æ¡£çš„æƒ…å†µä¸‹ï¼Œ204ç¡®ä¿æµè§ˆå™¨ç»§ç»­æ˜¾ç¤ºå…ˆå‰çš„æ–‡æ¡£ã€‚è¿™ä¸ªçŠ¶æ€ç å¯¹äºç”¨æˆ·å‘¨æœŸæ€§çš„é‡è½½æŸä¸€é¡µéå¸¸æœ‰ç”¨ï¼Œå¹¶ä¸”ä½ å¯ä»¥ç¡®å®šå…ˆå‰çš„é¡µé¢æ˜¯å¦å·²ç»æ›´æ–°ã€‚ 205 (Reset Content/é‡ç½®å†…å®¹)205é‡ç½®å†…å®¹çš„æ„æ€æ˜¯è™½ç„¶æ²¡æœ‰æ–°æ–‡æ¡£ä½†æµè§ˆå™¨è¦é‡ç½®æ–‡æ¡£æ˜¾ç¤ºã€‚è¿™ä¸ªçŠ¶æ€ç ç”¨äºå¼ºè¿«æµè§ˆå™¨æ¸…é™¤è¡¨å•åŸŸã€‚ 206 (Partial Content/å±€éƒ¨å†…å®¹)206æ˜¯åœ¨æœåŠ¡å™¨å®Œæˆäº†ä¸€ä¸ªåŒ…å«Rangeå¤´ä¿¡æ¯çš„å±€éƒ¨è¯·æ±‚æ—¶è¢«å‘é€çš„ã€‚ 300-399 300 (Multiple Choices/å¤šé‡é€‰æ‹©)300è¡¨ç¤ºè¢«è¯·æ±‚çš„æ–‡æ¡£å¯ä»¥åœ¨å¤šä¸ªåœ°æ–¹æ‰¾åˆ°ï¼Œå¹¶å°†åœ¨è¿”å›çš„æ–‡æ¡£ä¸­åˆ—å‡ºæ¥ã€‚å¦‚æœæœåŠ¡å™¨æœ‰é¦–é€‰è®¾ç½®ï¼Œé¦–é€‰é¡¹å°†ä¼šè¢«åˆ—äºå®šä½å“åº”å¤´ä¿¡æ¯ä¸­ã€‚ 301 (Moved Permanently)301è¿™ä¸ªçŠ¶æ€æ˜¯æŒ‡æ‰€è¯·æ±‚çš„æ–‡æ¡£åœ¨åˆ«çš„åœ°æ–¹ï¼›æ–‡æ¡£æ–°çš„URLä¼šåœ¨å®šä½å“åº”å¤´ä¿¡æ¯ä¸­ç»™å‡ºã€‚æµè§ˆå™¨ä¼šè‡ªåŠ¨è¿æ¥åˆ°æ–°çš„URLã€‚ 302 (Found/æ‰¾åˆ°)302ä¸301æœ‰äº›ç±»ä¼¼ï¼Œåªæ˜¯å®šä½å¤´ä¿¡æ¯ä¸­æ‰€ç»™çš„URLåº”è¢«ç†è§£ä¸ºä¸´æ—¶äº¤æ¢åœ°å€è€Œä¸æ˜¯æ°¸ä¹…çš„ã€‚ 303 (See Other/å‚è§å…¶ä»–ä¿¡æ¯)303è¿™ä¸ªçŠ¶æ€ç å’Œ 301ã€302 ç›¸ä¼¼ï¼Œåªæ˜¯å¦‚æœæœ€åˆçš„è¯·æ±‚æ˜¯ POSTï¼Œé‚£ä¹ˆæ–°æ–‡æ¡£ï¼ˆåœ¨å®šä½å¤´ä¿¡æ¯ä¸­ç»™å‡ºï¼‰è¦ç”¨ GET æ‰¾å›ã€‚ 304 (Not Modified/ä¸ºä¿®æ­£)304è¡¨ç¤ºå½“å®¢æˆ·ç«¯æœ‰ä¸€ä¸ªç¼“å­˜çš„æ–‡æ¡£ï¼Œé€šè¿‡æä¾›ä¸€ä¸ª If-Modified-Since å¤´ä¿¡æ¯å¯æŒ‡å‡ºå®¢æˆ·ç«¯åªå¸Œæœ›æ–‡æ¡£åœ¨æŒ‡å®šæ—¥æœŸä¹‹åæœ‰æ‰€ä¿®æ”¹æ—¶æ‰ä¼šé‡è½½æ­¤æ–‡æ¡£ï¼Œç”¨è¿™ç§æ–¹å¼å¯ä»¥è¿›è¡Œæœ‰æ¡ä»¶çš„è¯·æ±‚ã€‚ 305 (Use Proxy/ä½¿ç”¨ä»£ç†)305è¡¨ç¤ºæ‰€è¯·æ±‚çš„æ–‡æ¡£è¦é€šè¿‡å®šä½å¤´ä¿¡æ¯ä¸­çš„ä»£ç†æœåŠ¡å™¨è·å¾—ã€‚ 307 (Temporary Redirect/ä¸´æ—¶é‡å®šå‘)æµè§ˆå™¨å¤„ç†307çŠ¶æ€çš„è§„åˆ™ä¸302ç›¸åŒã€‚307çŠ¶æ€è¢«åŠ å…¥åˆ° HTTP 1.1ä¸­æ˜¯ç”±äºè®¸å¤šæµè§ˆå™¨åœ¨æ”¶åˆ°302å“åº”æ—¶å³ä½¿æ˜¯åŸå§‹æ¶ˆæ¯ä¸ºPOSTçš„æƒ…å†µä¸‹ä»ç„¶æ‰§è¡Œäº†é”™è¯¯çš„è½¬å‘ã€‚åªæœ‰åœ¨æ”¶åˆ°303å“åº”æ—¶æ‰å‡å®šæµè§ˆå™¨ä¼šåœ¨POSTè¯·æ±‚æ—¶é‡å®šå‘ã€‚æ·»åŠ è¿™ä¸ªæ–°çš„çŠ¶æ€ç çš„ç›®çš„å¾ˆæ˜ç¡®ï¼šåœ¨å“åº”ä¸º303æ—¶æŒ‰ç…§GETå’ŒPOSTè¯·æ±‚è½¬å‘ï¼›è€Œåœ¨307å“åº”æ—¶åˆ™æŒ‰ç…§GETè¯·æ±‚è½¬å‘è€Œä¸æ˜¯POSTè¯·æ±‚ã€‚ 400-499 400 (Bad Request/é”™è¯¯è¯·æ±‚)400æŒ‡å‡ºå®¢æˆ·ç«¯è¯·æ±‚ä¸­çš„è¯­æ³•é”™è¯¯ã€‚ 401 (Unauthorized/æœªæˆæƒ)401è¡¨ç¤ºå®¢æˆ·ç«¯åœ¨æˆæƒå¤´ä¿¡æ¯ä¸­æ²¡æœ‰æœ‰æ•ˆçš„èº«ä»½ä¿¡æ¯æ—¶è®¿é—®å—åˆ°å¯†ç ä¿æŠ¤çš„é¡µé¢ã€‚è¿™ä¸ªå“åº”å¿…é¡»åŒ…å«ä¸€ä¸ªWWW-Authenticateçš„æˆæƒä¿¡æ¯å¤´ã€‚ 403 (Forbidden/ç¦æ­¢)403è¡¨ç¤ºé™¤éæ‹¥æœ‰æˆæƒå¦åˆ™æœåŠ¡å™¨æ‹’ç»æä¾›æ‰€è¯·æ±‚çš„èµ„æºã€‚è¿™ä¸ªçŠ¶æ€ç»å¸¸ä¼šç”±äºæœåŠ¡å™¨ä¸Šçš„æŸåæ–‡ä»¶æˆ–ç›®å½•è®¸å¯è€Œå¼•èµ·ã€‚ 404 (Not Found/æœªæ‰¾åˆ°)404çŠ¶æ€æ¯ä¸ªç½‘ç»œç¨‹åºå‘˜å¯èƒ½éƒ½é‡åˆ°è¿‡ï¼Œä»–å‘Šè¯‰å®¢æˆ·ç«¯æ‰€ç»™çš„åœ°å€æ— æ³•æ‰¾åˆ°ä»»ä½•èµ„æºã€‚ 405 (Method Not Allowed/æ–¹æ³•æœªå…è®¸)405æŒ‡å‡ºè¯·æ±‚æ–¹æ³•(GET, POST, HEAD, PUT, DELETE, ç­‰)å¯¹æŸäº›ç‰¹å®šçš„èµ„æºä¸å…è®¸ä½¿ç”¨ã€‚ 406 (Not Acceptable/æ— æ³•è®¿é—®)406è¡¨ç¤ºè¯·æ±‚èµ„æºçš„MIMEç±»å‹ä¸å®¢æˆ·ç«¯ä¸­Acceptå¤´ä¿¡æ¯ä¸­æŒ‡å®šçš„ç±»å‹ä¸ä¸€è‡´ã€‚ 407 (Proxy Authentication Required/ä»£ç†æœåŠ¡å™¨è®¤è¯è¦æ±‚)407ä¸401çŠ¶æ€æœ‰äº›ç›¸ä¼¼ï¼Œåªæ˜¯è¿™ä¸ªçŠ¶æ€ç”¨äºä»£ç†æœåŠ¡å™¨ã€‚è¯¥çŠ¶æ€æŒ‡å‡ºå®¢æˆ·ç«¯å¿…é¡»é€šè¿‡ä»£ç†æœåŠ¡å™¨çš„è®¤è¯ã€‚ä»£ç†æœåŠ¡å™¨è¿”å›ä¸€ä¸ªProxy-Authenticateå“åº”å¤´ä¿¡æ¯ç»™å®¢æˆ·ç«¯ï¼Œè¿™ä¼šå¼•èµ·å®¢æˆ·ç«¯ä½¿ç”¨å¸¦æœ‰Proxy-Authorizationè¯·æ±‚çš„å¤´ä¿¡æ¯é‡æ–°è¿æ¥ã€‚ 408 (Request Timeout/è¯·æ±‚è¶…æ—¶)408æ˜¯æŒ‡æœåŠ¡ç«¯ç­‰å¾…å®¢æˆ·ç«¯å‘é€è¯·æ±‚çš„æ—¶é—´è¿‡é•¿ã€‚ 409 (Conflict/å†²çª)è¯¥çŠ¶æ€é€šå¸¸ä¸PUTè¯·æ±‚ä¸€åŒä½¿ç”¨ï¼Œ409çŠ¶æ€å¸¸è¢«ç”¨äºè¯•å›¾ä¸Šä¼ ç‰ˆæœ¬ä¸æ­£ç¡®çš„æ–‡ä»¶æ—¶ã€‚ 410 (Gone/å·²ç»ä¸å­˜åœ¨)410å‘Šè¯‰å®¢æˆ·ç«¯æ‰€è¯·æ±‚çš„æ–‡æ¡£å·²ç»ä¸å­˜åœ¨å¹¶ä¸”æ²¡æœ‰æ›´æ–°çš„åœ°å€ã€‚410çŠ¶æ€ä¸åŒäº404ï¼Œ410æ˜¯åœ¨æŒ‡å¯¼æ–‡æ¡£å·²è¢«ç§»èµ°çš„æƒ…å†µä¸‹ä½¿ç”¨ï¼Œè€Œ404åˆ™ç”¨äºæœªçŸ¥åŸå› çš„æ— æ³•è®¿é—®ã€‚ 411 (Length Required/éœ€è¦æ•°æ®é•¿åº¦)411è¡¨ç¤ºæœåŠ¡å™¨ä¸èƒ½å¤„ç†è¯·æ±‚ï¼ˆå‡è®¾ä¸ºå¸¦æœ‰é™„ä»¶çš„POSTè¯·æ±‚ï¼‰ï¼Œé™¤éå®¢æˆ·ç«¯å‘é€Content-Lengthå¤´ä¿¡æ¯æŒ‡å‡ºå‘é€ç»™æœåŠ¡å™¨çš„æ•°æ®çš„å¤§å°ã€‚ 412 (Precondition Failed/å…ˆå†³æ¡ä»¶é”™è¯¯)412çŠ¶æ€æŒ‡å‡ºè¯·æ±‚å¤´ä¿¡æ¯ä¸­çš„æŸäº›å…ˆå†³æ¡ä»¶æ˜¯é”™è¯¯çš„ã€‚ 413 (Request Entity Too Large/è¯·æ±‚å®ä½“è¿‡å¤§)413å‘Šè¯‰å®¢æˆ·ç«¯ç°åœ¨æ‰€è¯·æ±‚çš„æ–‡æ¡£æ¯”æœåŠ¡å™¨ç°åœ¨æƒ³è¦å¤„ç†çš„è¦å¤§ã€‚å¦‚æœæœåŠ¡å™¨è®¤ä¸ºèƒ½å¤Ÿè¿‡ä¸€æ®µæ—¶é—´å¤„ç†ï¼Œåˆ™ä¼šåŒ…å«ä¸€ä¸ªRetry-Afterçš„å“åº”å¤´ä¿¡æ¯ã€‚ 414 (Request URI Too Long/è¯·æ±‚URIè¿‡é•¿)414çŠ¶æ€ç”¨äºåœ¨URIè¿‡é•¿çš„æƒ…å†µæ—¶ã€‚è¿™é‡Œæ‰€æŒ‡çš„â€œURIâ€æ˜¯æŒ‡URLä¸­ä¸»æœºã€åŸŸååŠç«¯å£å·ä¹‹åçš„å†…å®¹ã€‚ 415 (Unsupported Media Type/ä¸æ”¯æŒçš„åª’ä½“æ ¼å¼)415æ„å‘³ç€è¯·æ±‚æ‰€å¸¦çš„é™„ä»¶çš„æ ¼å¼ç±»å‹æœåŠ¡å™¨ä¸çŸ¥é“å¦‚ä½•å¤„ç†ã€‚ 416 (Requested Range Not Satisfiable/è¯·æ±‚èŒƒå›´æ— æ³•æ»¡è¶³)416è¡¨ç¤ºå®¢æˆ·ç«¯åŒ…å«äº†ä¸€ä¸ªæœåŠ¡å™¨æ— æ³•æ»¡è¶³çš„Rangeå¤´ä¿¡æ¯çš„è¯·æ±‚ã€‚ 417 (Expectation Failed/æœŸæœ›å¤±è´¥)å¦‚æœæœåŠ¡å™¨å¾—åˆ°ä¸€ä¸ªå¸¦æœ‰100-continueå€¼çš„Expectè¯·æ±‚å¤´ä¿¡æ¯ï¼Œè¿™æ˜¯æŒ‡å®¢æˆ·ç«¯æ­£åœ¨è¯¢é—®æ˜¯å¦å¯ä»¥åœ¨åé¢çš„è¯·æ±‚ä¸­å‘é€é™„ä»¶ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼ŒæœåŠ¡å™¨ä¹Ÿä¼šç”¨è¯¥çŠ¶æ€å‘Šè¯‰æµè§ˆå™¨æœåŠ¡å™¨ä¸æ¥æ”¶è¯¥é™„ä»¶æˆ–ç”¨100çŠ¶æ€å‘Šè¯‰å®¢æˆ·ç«¯å¯ä»¥ç»§ç»­å‘é€é™„ä»¶ã€‚ 500-599 500 (Internal Server Error/å†…éƒ¨æœåŠ¡å™¨é”™è¯¯)500æ˜¯å¸¸ç”¨çš„â€œæœåŠ¡å™¨é”™è¯¯â€çŠ¶æ€ã€‚è¯¥çŠ¶æ€ç»å¸¸ç”±æœåŠ¡ç«¯ç¨‹åºå¼•èµ·ä¹Ÿå¯èƒ½ç”±æ— æ³•æ­£å¸¸è¿è¡Œçš„æˆ–è¿”å›å¤´ä¿¡æ¯æ ¼å¼ä¸æ­£ç¡®å¼•èµ·ã€‚ 501 (Not Implemented/æœªå®ç°)501çŠ¶æ€å‘Šè¯‰å®¢æˆ·ç«¯æœåŠ¡å™¨ä¸æ”¯æŒè¯·æ±‚ä¸­è¦æ±‚çš„åŠŸèƒ½ã€‚ä¾‹å¦‚ï¼Œå®¢æˆ·ç«¯æ‰§è¡Œäº†å¦‚PUTè¿™æ ·çš„æœåŠ¡å™¨å¹¶ä¸æ”¯æŒçš„å‘½ä»¤ã€‚ 502 (Bad Gateway/é”™è¯¯çš„ç½‘å…³)502è¢«ç”¨äºå……å½“ä»£ç†æˆ–ç½‘å…³çš„æœåŠ¡å™¨ï¼›è¯¥çŠ¶æ€æŒ‡å‡ºæ¥æ”¶æœåŠ¡å™¨æ¥æ”¶åˆ°è¿œç«¯æœåŠ¡å™¨çš„é”™è¯¯å“åº”ã€‚ 503 (Service Unavailable/æœåŠ¡æ— æ³•è·å¾—)503è¡¨ç¤ºæœåŠ¡å™¨ç”±äºåœ¨ç»´æŠ¤æˆ–å·²ç»è¶…è½½è€Œæ— æ³•å“åº”ã€‚æœåŠ¡å™¨å¯æä¾›ä¸€ä¸ªRetry-Afterå¤´ä¿¡æ¯å‘Šè¯‰å®¢æˆ·ç«¯ä»€ä¹ˆæ—¶å€™å¯ä»¥åœ¨è¯•ä¸€æ¬¡ã€‚ 504 (Gateway Timeout/ç½‘å…³è¶…æ—¶)è¯¥çŠ¶æ€ä¹Ÿç”¨äºå……å½“ä»£ç†æˆ–ç½‘å…³çš„æœåŠ¡å™¨ï¼›å®ƒæŒ‡å‡ºæ¥æ”¶æœåŠ¡å™¨æ²¡æœ‰ä»è¿œç«¯æœåŠ¡å™¨å¾—åˆ°åŠæ—¶çš„å“åº”ã€‚ 505 (HTTP Version Not Supported/ä¸æ”¯æŒçš„ HTTP ç‰ˆæœ¬)505è¡¨ç¤ºæœåŠ¡å™¨å¹¶ä¸æ”¯æŒåœ¨è¯·æ±‚ä¸­æ‰€æ ‡æ˜ HTTP ç‰ˆæœ¬ã€‚ æ³¨ï¼š æœ¬æ–‡ä»…ä½œä¸ºä¸ªäººæ€»ç»“å‚è€ƒã€‚]]></content>
      <categories>
        <category>ç½‘ç»œ</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[å†™åœ¨å¼€å§‹]]></title>
    <url>%2F2017%2F12%2F22%2F%E5%86%99%E5%9C%A8%E5%BC%80%E5%A7%8B%2F</url>
    <content type="text"><![CDATA[æ‚Ÿä»¥å¾€ä¹‹ä¸è°ï¼ŒçŸ¥æ¥è€…ä¹‹å¯è¿½ã€‚è¯†è¿·é€”å…¶æœªè¿œï¼Œè§‰ä»Šæ˜¯è€Œæ˜¨éã€‚ â€”â€”é™¶æ¸Šæ˜ æœ¬ä¸»é¡µæ˜¯åšä¸»ç”¨æ¥è®°å½•å·¥ä½œå’Œç”Ÿæ´»ä¸­çš„ç‚¹æ»´ï¼Œå¸Œæœ›åƒå¤äººè¯´çš„é‚£æ ·æ—¶å¸¸å›é¡¾è¿‡å»ï¼Œæ€»ç»“è‡ªèº«ï¼Œå±•æœ›æœªæ¥ã€‚ç¬”è€…è‡³ä»Šå·¥ä½œä¸‰å¹´æœ‰ä½™ï¼Œä»ä¸€ä¸ªä»€ä¹ˆéƒ½ä¸æ‡‚çš„å°ç™½ï¼Œåˆ°è‹¦é€¼çš„ä¸šåŠ¡è¿ç»´ï¼Œå†åˆ°ä¼šâ€œå·æ‡’â€çš„è¿ç»´å¼€å‘ï¼Œä¸­é—´è¸©è¿‡ä¸å°‘å‘ï¼Œä¹Ÿå¡«è¿‡ä¸å°‘å‘ã€‚å¸Œæœ›åœ¨è¿™é‡Œè®°å½•ä¸€ä¸‹æˆé•¿çš„å†ç¨‹ã€‚ç”¨ä»¥æé†’è‡ªå·±ï¼ŒåŒæ—¶å¸Œæœ›å¯ä»¥å¯è¿ªè¯»è€…ã€‚ ç»è¿‡æ€è€ƒï¼Œå°†ä¼šåšæˆå›å¿†å½•çš„å½¢å¼ã€‚è„‘æµ·é‡Œå§‹ç»ˆè¦ç»•ç€ä¸€å¥è¯ï¼Œâ€œä¸€æ®µå¾€äº‹ï¼Œä¸€ç§æŠ€æœ¯â€ã€‚æ—¢æ˜¯å›å¿†å¾€äº‹ç»å†ï¼ŒåŒæ—¶ä¹Ÿæ˜¯å›å¿†æ‰€å­¦ä¹‹æŠ€æœ¯ã€‚æˆ–è®¸ï¼Œè¿™å°±æ˜¯æˆ‘å†™è¿™ä¸ªåšå®¢çš„ä¸»è¦ç›®çš„ã€‚ æœ€åï¼Œå€Ÿç”¨æ›¾å­çš„ä¸€å¥è¯æ¥å‹‰åŠ±ä¸€ä¸‹è‡ªå·±ï¼Œ â€œå¾æ—¥ä¸‰çœå¾èº«â€”â€”ä¸ºäººè°‹è€Œä¸å¿ ä¹ï¼Ÿä¸æœ‹å‹äº¤è€Œä¸ä¿¡ä¹ï¼Ÿä¼ ä¸ä¹ ä¹ï¼Ÿâ€]]></content>
      <categories>
        <category>ä¸ªäººæ„Ÿæ‚Ÿ</category>
      </categories>
  </entry>
</search>
